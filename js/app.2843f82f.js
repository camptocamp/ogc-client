(function(e){function t(t){for(var r,i,o=t[0],c=t[1],u=t[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=this["webpackJsonp"]=this["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0abb":function(e,t,n){"use strict";var r=n("9523").default;n("a15b"),n("d3b7"),n("25f0"),n("99af"),Object.defineProperty(t,"__esModule",{value:!0}),t.generateDescribeFeatureTypeUrl=t.generateGetFeatureUrl=void 0;var a=n("f490");function s(e,t,n,s,i,o,c,u,l,p){var d="2.0.0"===t?"TYPENAMES":"TYPENAME",m="2.0.0"===t?"COUNT":"MAXFEATURES",h=r({SERVICE:"WFS",REQUEST:"GetFeature",VERSION:t},d,n);if(void 0!==s&&(h.OUTPUTFORMAT=s),void 0!==o&&(h.PROPERTYNAME=o.join(",")),c?(h.RESULTTYPE="hits",h[m]="1"):void 0!==i&&(h[m]=i.toString(10)),u&&(h.SRSNAME=u),l){var f=l.join(",");h.BBOX=p?"".concat(f,",").concat(p):f}return(0,a.setQueryParams)(e,h)}function i(e,t,n){var s="2.0.0"===t?"TYPENAMES":"TYPENAME";return(0,a.setQueryParams)(e,r({SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:t},s,n))}t.generateGetFeatureUrl=s,t.generateDescribeFeatureTypeUrl=i},"0bde":function(e,t,n){"use strict";n("b03c")},"0e7b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"col-8 offset-2"},[n("h1",{staticClass:"title text-center",staticStyle:{"font-size":"5em",margin:"130px 0 70px"}},[n("LibLogo")],1),n("div",{staticClass:"d-flex flex-row justify-content-center",staticStyle:{"margin-bottom":"70px"}},[n("button",{staticClass:"btn btn-primary tab-toggle m-3",class:{"tab-toggle-enabled":!e.demoTabEnabled},attrs:{type:"button"},on:{click:function(t){e.demoTabEnabled=!1}}},[e._v(" DOCS ")]),n("button",{staticClass:"btn btn-primary tab-toggle m-3",class:{"tab-toggle-enabled":e.demoTabEnabled},attrs:{type:"button"},on:{click:function(t){e.demoTabEnabled=!0}}},[e._v(" TRY IT! ")])]),e.demoTabEnabled?e._e():n("Docs"),e.demoTabEnabled?n("Demo"):e._e()],1)])},s=[],i=(n("fc04"),function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",[e._v("ogc-client")])])}],c={name:"LibLogo"},u=c,l=(n("902e"),n("2877")),p=Object(l["a"])(u,i,o,!1,null,"7bc12546",null),d=p.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"mb-4"},[e._v("Presentation")]),n("p",[n("LibName"),e._v(" is a pure Javascript library made for interacting with geospatial web services relying on standard protocols, namely "),n("a",{attrs:{href:"https://www.ogc.org/docs/is"}},[e._v("OGC standards.")])],1),n("p",[e._v(" Its purpose is to helps you interact with them in a user-friendly and consistent way. ")]),n("p",[e._v("Its main features include:")]),e._m(0),n("h2",{staticClass:"mt-5 mb-4"},[e._v("Usage")]),n("p",[e._v("First, install "),n("LibName"),e._v(" in your project:")],1),n("p",[n("CodeBlock",{attrs:{lang:"sh"}},[e._v("$ npm install --save @camptocamp/ogc-client")])],1),n("p",[e._v("Then, use it like so:")]),n("p",[n("CodeBlock",{attrs:{lang:"js"}},[n("pre",[e._v("import { WfsEndpoint } from '@camptocamp/ogc-client';\n\nnew WfsEndpoint('https://my.server.org/ows')\n  .then(endpoint => endpoint.supportsJson());")])])],1),n("p",[e._v(" Please refer to the API section for more details on how to use each functionality. ")]),n("div",{staticClass:"card text-bg-light mb-3"},[n("div",{staticClass:"card-header"},[e._v("A note on text encoding")]),n("div",{staticClass:"card-body"},[e._m(1),n("p",{staticClass:"card-text"},[n("LibName"),e._v(" will attempt to decode the responses using the information at its disposal, and in most case decoding should succeed. It may happen though that some unrecognized characters will remain; please "),n("a",{attrs:{href:"https://github.com/camptocamp/ogc-client/issues/new"}},[e._v("open an issue")]),e._v(" if that is the case! ")],1)])]),n("h2",{staticClass:"mt-5 mb-4"},[e._v("Why use it?")]),n("p",[e._v(" Many libraries are able to leverage OGC protocols for various specialized tasks, for instance downloading data or rendering maps. Often times though, the application code has the responsibility to specify the version to use, the coordinate system, the bounding box to query, etc. ")]),n("p",[n("LibName"),e._v(" intends to assist applications in discovering OGC services and what they offer, without having to manually write code for parsing GetCapabilities documents for example. ")],1),n("p",[e._v(" When an network error is encountered, "),n("LibName"),e._v(" will do an additional check to determine whether this is due to "),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"}},[e._v("CORS")]),e._v(" limitations. This will help the application code in giving an appropriate feedback to the user, i.e. that the targeted resource is indeed reachable but does not allow cross-origin usage. ")],1),n("p",[n("LibName"),e._v(" also keeps a cache of all operations using the "),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Cache"}},[e._v("Cache API")]),e._v(", thus offering almost limitless storage while also purging expired cache entries regularly. By default, all cache entries are kept for one hour. ")],1),n("p",[e._v("What "),n("LibName"),e._v(" currently does not do:")],1),e._m(2),n("h2",{staticClass:"mt-5 mb-4"},[e._v("Examples")]),n("h5",[e._v("Read a WMS layer extent")]),n("p",[n("CodeBlock",{attrs:{lang:"js"}},[n("pre",[e._v("import { WmsEndpoint } from '@camptocamp/ogc-client';\n\nasync function readExtent() {\n  const endpoint = await new WmsEndpoint('https://my.server.org/ows').isReady()\n  const layer = endpoint.getLayerByName();\n  const extent = layer.boundingBoxes['EPSG:4326'];\n}")])])],1),n("h5",[e._v("Compute a WFS GetFeature url")]),n("p",[n("CodeBlock",{attrs:{lang:"js"}},[n("pre",[e._v("import { WfsEndpoint } from '@camptocamp/ogc-client';\n\nasync function getFeatureUrl() {\n  const endpoint = await new WfsEndpoint('https://my.server.org/ows').isReady()\n  const url = endpoint.getFeatureUrl('my:featureType', {\n    asJson: true,\n    maxFeature: 1000\n  });\n}")])])],1),n("h2",{staticClass:"mt-5 mb-4"},[e._v("API")]),n("ApiDescription")],1)},h=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v(" Support for "),n("a",{attrs:{href:"https://www.ogc.org/standards/wfs"}},[e._v("WFS")]),e._v(" and "),n("a",{attrs:{href:"https://www.ogc.org/standards/wms"}},[e._v("WMS")]),e._v(" protocols ")]),n("li",[e._v("Elaborate cache system to minimize network requests")]),n("li",[e._v(" Fast parsing of XML documents using "),n("a",{attrs:{href:"https://github.com/rgrove/parse-xml"}},[e._v("@rgrove/parse-xml")])]),n("li",[e._v(" Detection of "),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"}},[e._v("CORS")]),e._v("-related issues ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"card-text"},[e._v(" Even though "),n("strong",[e._v("UTF-8")]),e._v(" is the most common text encoding in the web, some services might respond with other encodings such as "),n("strong",[e._v("UTF-16")]),e._v(", "),n("strong",[n("a",{attrs:{href:"https://en.wikipedia.org/wiki/ISO/IEC_8859-1"}},[e._v("ISO-8859-1")])]),e._v(", etc. ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v(" No "),n("a",{attrs:{href:"https://www.ogc.org/standards/wmts"}},[e._v("WMTS")]),e._v(" parsing: alternatives already exist, such as the OpenLayers "),n("a",{attrs:{href:"https://openlayers.org/en/latest/apidoc/module-ol_format_WMTSCapabilities-WMTSCapabilities.html"}},[e._v("WMTS Capabilities")]),e._v(" class ("),n("a",{attrs:{href:"https://openlayers.org/en/latest/examples/wmts-capabilities.html"}},[e._v("example")]),e._v(") ")]),n("li",[e._v(" No GML geometry parsing: again, "),n("a",{attrs:{href:"https://openlayers.org/en/latest/apidoc/module-ol_format_GML32-GML32.html"}},[e._v("alternatives do exist")])])])}],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",[n("code",{class:e.lang+" border-0 rounded-2 p-3"},[e._t("default")],2)])},y=[],g={name:"CodeBlock",props:["lang"]},v=g,b=Object(l["a"])(v,f,y,!1,null,"e4c545f6",null),E=b.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.API.exports,(function(t){return["Class"===t.type?n("ClassCard",{attrs:{"api-element":t}}):e._e(),"Function"===t.type?n("FunctionCard",{attrs:{"api-element":t}}):e._e()]}))],2)},C=[],S={exports:[{name:"WfsEndpoint",type:"Class",constructor:{params:[{name:"url",type:"string"}],description:"Creates a new WFS endpoint; wait for the `isReady()` promise before using the endpoint methods."},methods:[{name:"isReady",description:"Resolves when the endpoint is ready to use. Returns the same endpoint object for convenience.",params:[],return:{type:"Promise",subType:"WfsEndpoint"}},{name:"getServiceInfo",description:"Returns the service info.",params:[],return:{type:"GenericEndpointInfo"}},{name:"getVersion",description:"Returns the highest protocol version that this WFS endpoint supports.\nNote that if the url used for initialization does specify a version (e.g. `1.0.0`,\nthis version will most likely be used instead of the highest supported one.",params:[],return:{type:"string",values:["1.0.0","1.1.0","2.0.0"]}},{name:"getFeatureTypes",description:"Returns the available feature types.",params:[],return:{type:"Array",subType:"WfsFeatureTypeBrief"}},{name:"getFeatureTypeSummary",description:"Returns the feature type in summary format. If a namespace is specified in the name,\nthis will be used for matching; otherwise, matching will be done without taking namespaces into account.",params:[{name:"featureType",type:"string"}],return:{type:"WfsFeatureTypeSummary"}},{name:"getFeatureTypeFull",description:"Returns a promise that will resolve with the full feature type description,\nincluding properties with their types, geometry field and total object count.",params:[{name:"featureType",type:"string"}],return:{type:"Promise",subType:"WfsFeatureTypeFull"}},{name:"getFeatureTypePropDetails",description:"Returns a promise that will resolve with details on each of the feature type properties;\nfor now, this consists of a list of unique values in the whole dataset.",params:[{name:"featureType",type:"string"}],return:{type:"Promise",subType:"WfsFeatureTypePropDetails"}},{name:"supportsJson",description:"Returns true if the endpoint is able to output the specified feature type as GeoJSON.",params:[{name:"featureType",type:"string"}],return:{type:"boolean"}},{name:"getFeatureUrl",description:"Returns a URL that can be used to query features from this feature type.",params:[{name:"featureType",type:"string"},{name:"options",type:"GetFeatureUrlOptions"}],return:{type:"string"}}]},{name:"WmsEndpoint",type:"Class",constructor:{params:[{name:"url",type:"string"}],description:"Creates a new WMS endpoint; wait for the `isReady()` promise before using the endpoint methods."},methods:[{name:"isReady",description:"Resolves when the endpoint is ready to use. Returns the same endpoint object for convenience.",params:[],return:{type:"Promise",subType:"WmsEndpoint"}},{name:"getServiceInfo",description:"Returns the service info.",params:[],return:{type:"GenericEndpointInfo"}},{name:"getVersion",description:"Returns the highest protocol version that this WMS endpoint supports.\nNote that if the url used for initialization does specify a version (e.g. `1.1.0`,\nthis version will most likely be used instead of the highest supported one.",params:[],return:{type:"string",values:["1.1.0","1.1.1","1.3.0"]}},{name:"getLayers",description:"Returns the layers advertised in the endpoint. Note that WMS layers are organized\nin a tree structure, so some layers may have children layers as well",params:[],return:{type:"Array",subType:"WmsLayerSummary"}},{name:"getLayerByName",description:"Returns the full layer information, including supported coordinate systems,\navailable layers, bounding boxes etc. Layer name is case sensitive.",params:[{name:"layerName",type:"string"}],return:{type:"WmsLayerFull"}}]},{name:"useCache",type:"Function",description:"Will run the provided function and resolve to its return value.\nThe function return value will also be stored in cache, meaning that subsequent runs will **not** execute the function but\nsimply return the cached value. `keys` are an indeterminate amount of string tokens that are used to uniquely identify the operation.\n\nCached values are kept for one hour. Each call to `useCache` will first loop on the currently cached values and\nclear the ones that have expired to make sure that the cache storage does not grow indefinitely.\n\nAlso note that if `useCache` is called several times with the same key without the first one having returned yet, all subsequent calls\nwill **not** trigger additional operations but simply resolve at the same time as the first one.\n\nCache is kept using the [Cache API](https://developer.mozilla.org/en-US/docs/Web/API/Cache), which has virtually no size limit.\nCache entries might be removed by the browser without notice. The identifying key for the cache entries is `ogc-client`.",params:[{name:"process",type:"AsyncFunction",params:[],subType:"any"},{name:"...keys",type:"Array",subType:"string"}],return:{type:"Promise",subType:"any"}},{name:"sharedFetch",type:"Function",description:"Returns a promise equivalent to `fetch(url)` but guarded against identical concurrent requests.\nRequests are considered identical if they share the _exact_ same url.",params:[{name:"url",type:"string"}],return:{type:"Promise",subType:"Response"}}],types:[{name:"GenericEndpointInfo",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title"},{type:"string",name:"abstract"},{type:"string",name:"fees"},{type:"string",name:"constraints"},{type:"Array",subType:"string",name:"keywords"},{type:"Array",subType:"string",name:"outputFormats",optional:!0}]},{name:"WfsFeatureTypeBrief",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title",optional:!0},{type:"string",name:"abstract",optional:!0},{type:"BoundingBox",name:"boundingBox",optional:!0}]},{name:"WfsFeatureTypeSummary",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title",optional:!0},{type:"string",name:"abstract",optional:!0},{type:"BoundingBox",name:"boundingBox",optional:!0},{type:"CrsCode",name:"defaultCrs"},{type:"Array",subtype:"CrsCode",name:"otherCrs"},{type:"Array",subtype:"string",name:"outputFormats"}]},{name:"WfsFeatureTypeFull",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title",optional:!0},{type:"string",name:"abstract",optional:!0},{type:"BoundingBox",name:"boundingBox",optional:!0},{type:"CrsCode",name:"defaultCrs"},{type:"Array",subtype:"CrsCode",name:"otherCrs"},{type:"Array",subtype:"string",name:"outputFormats"},{type:"Map",subType:"FeaturePropertyType",name:"properties",description:"These properties will _not_ include the feature geometry"},{type:"string",name:"geometryName",description:"Not defined if no geometry present",optional:!0},{type:"FeatureGeometryType",name:"geometryType",description:"Not defined if no geometry present",optional:!0},{type:"number",name:"objectCount",description:"Not defined if object count could not be determined",optional:!0}]},{name:"WfsFeatureTypePropDetails",type:"Object",properties:[{name:"uniqueValues",type:"Array",subType:"WfsFeatureTypeUniqueValue"}]},{name:"WfsFeatureTypeUniqueValue",type:"Object",properties:[{type:"number",name:"count",description:"Number of occurrences of this value in the dataset"},{type:"Union",subTypes:["number","boolean","string"],name:"value"}]},{name:"GetFeatureUrlOptions",type:"Object",properties:[{type:"number",name:"maxFeatures",description:"All objects will be returned if undefined"},{type:"boolean",name:"asJson",description:"If `true`, will ask for GeoJSON; will throw if the service does not support it"},{type:"MimeType",name:"outputFormat",description:"A supported output format (overridden by `asJson`)"},{type:"CrsCode",name:"outputCrs",description:"If unspecified, this will be the data native projection"},{type:"BoundingBox",name:"extent",description:"An extent to restrict returned objects"},{type:"CrsCode",name:"extentCrs",description:"If unspecified, `extent` should be in the data native projection"}]},{name:"WmsLayerSummary",type:"Object",properties:[{type:"string",name:"name",description:"The layer is renderable if defined",optional:!0},{type:"string",name:"title"},{type:"string",name:"abstract"},{type:"Array",subType:"WmsLayerFull",name:"children",description:"Not defined if the layer is a leaf in the tree",optional:!0}]},{name:"WmsLayerFull",type:"Object",properties:[{type:"string",name:"name",description:"The layer is renderable if defined",optional:!0},{type:"string",name:"title"},{type:"string",name:"abstract",optional:!0},{type:"Array",subType:"CrsCode",name:"availableCrs"},{type:"Array",subType:"WmsLayerStyle",name:"styles"},{type:"Map",key:"string",subType:"BoundingBox",name:"boundingBoxes",description:"Dictionary of bounding boxes for each of the available CRS"},{type:"WmsLayerAttribution",name:"attribution",optional:!0},{type:"Array",subType:"WmsLayerFull",name:"children",description:"Not defined if the layer is a leaf in the tree",optional:!0}]},{name:"WmsLayerAttribution",type:"Object",properties:[{type:"string",name:"title",optional:!0},{type:"string",name:"url",optional:!0},{type:"string",name:"logoUrl",optional:!0}]},{name:"WmsLayerStyle",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title"},{type:"string",name:"legendUrl",description:"May not be defined; a GetLegendGraphic operation should work in any case",optional:!0}]},{name:"BoundingBox",type:"Array",subTypes:["number","number","number","number"],description:"Values are `minX`, `minY`, `maxX` and `maxY` expressed in latitudes and longitudes"}]},w=S,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card mb-4"},[n("div",{staticClass:"card-header text-uppercase small border-bottom-0 py-1 px-3"},[e._v(" class ")]),n("div",{staticClass:"card-body pb-0"},[n("h5",{staticClass:"mb-3"},[n("code",{domProps:{innerHTML:e._s(e.className)}})]),n("CodeBlock",{staticClass:"mb-3",attrs:{lang:"js"}},[n("pre",[e._v("import { "+e._s(e.apiElement.name)+" } from '@camptocamp/ogc-client';")])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-3 text-uppercase text-secondary fw-bold pt-1",staticStyle:{"font-size":"0.8em"}},[e._v(" ðŸ“¦ constructor ")]),n("div",{staticClass:"col"},[n("code",{staticClass:"mb-2",domProps:{innerHTML:e._s(e.constructorSignature)}}),e.apiElement.constructor.description?n("MarkdownBlock",{staticClass:"mb-2 small",attrs:{text:e.apiElement.constructor.description}}):e._e()],1)]),e._l(e.apiElement.methods,(function(t){return n("div",{staticClass:"row"},[n("div",{staticClass:"col-3 text-uppercase text-secondary fw-bold pt-1",staticStyle:{"font-size":"0.8em"}},[e._v(" âš¡ method ")]),n("div",{staticClass:"col"},[n("code",{staticClass:"mb-2",domProps:{innerHTML:e._s(e.formatMethod(t))}}),n("div",{staticClass:"row pb-2"},[n("div",{staticClass:"col-3 text-uppercase text-secondary fw-bold pt-1",staticStyle:{"font-size":"0.8em"}},[e._v(" ðŸŒ±ï¸ returns ")]),n("div",{staticClass:"col"},[n("code",{domProps:{innerHTML:e._s(e.formatMethodReturned(t))}})])]),t.description?n("MarkdownBlock",{staticClass:"mb-2 small",attrs:{text:t.description}}):e._e()],1)])})),n("MarkdownBlock",{staticClass:"mb-3 mt-2 small",attrs:{text:e.apiElement.description}})],2)])},T=[],P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{domProps:{innerHTML:e._s(e.parsed)}})},O=[],F=n("7c5c"),j={name:"MarkdownBlock",props:{text:String},computed:{parsed:function(){return F["parse"](this.text)}}},k=j,I=Object(l["a"])(k,P,O,!1,null,"53a4bfa6",null),N=I.exports;n("b0c0"),n("a15b"),n("d81d"),n("99af"),n("d3b7"),n("ddb0");function R(e){return e.name}function M(e){var t=e.params.map((function(e){return"".concat(e.name,": ").concat(W(e))})).join(", ");return"".concat(e.name,"(").concat(t,")")}function L(e){var t=e.constructor.params.map((function(e){return"".concat(e.name,": ").concat(W(e))})).join(", ");return"new ".concat(e.name,"(").concat(t,")")}function W(e){if(!e)return"void";var t=e.subType?W(e.subType):"";switch(e.type||e){case"Array":return"".concat(t,"[]");case"Response":return"[Response](https://developer.mozilla.org/en-US/docs/Web/API/Response)";case"Promise":return"[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;".concat(t,"&gt;");case"AsyncFunction":return"async () => ".concat(t);case"string":if(e.values)return e.values.map((function(e){return"'".concat(e)})).join(" | ")}return e.type||e}var A={name:"ClassCard",components:{MarkdownBlock:N,CodeBlock:E},props:{apiElement:Object},methods:{formatMethod:function(e){return F["parseInline"](M(e))},formatMethodReturned:function(e){return F["parseInline"](W(e.return))}},computed:{className:function(){return F["parseInline"](R(this.apiElement))},constructorSignature:function(){return F["parseInline"](L(this.apiElement))}}},G=A,B=(n("fb2c"),Object(l["a"])(G,x,T,!1,null,"066883f0",null)),U=B.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card mb-4"},[n("div",{staticClass:"card-header text-uppercase small border-bottom-0 py-1 px-3"},[e._v(" function ")]),n("div",{staticClass:"card-body pb-0"},[n("h5",{staticClass:"mb-3"},[n("code",{domProps:{innerHTML:e._s(e.signature)}})]),n("CodeBlock",{staticClass:"mb-3",attrs:{lang:"js"}},[n("pre",[e._v("import { "+e._s(e.apiElement.name)+" } from '@camptocamp/ogc-client';")])]),n("div",{staticClass:"row pb-2"},[n("div",{staticClass:"col-3 text-uppercase text-secondary fw-bold pt-1",staticStyle:{"font-size":"0.8em"}},[e._v(" ðŸŒ± returns ")]),n("div",{staticClass:"col"},[n("code",{domProps:{innerHTML:e._s(e.returned)}})])]),n("MarkdownBlock",{staticClass:"small mt-2",attrs:{text:e.apiElement.description}})],1)])},D=[],q={name:"FunctionCard",components:{MarkdownBlock:N,CodeBlock:E},props:{apiElement:Object},computed:{signature:function(){return F["parseInline"](M(this.apiElement))},returned:function(){return F["parseInline"](W(this.apiElement.return))}}},Q=q,z=(n("b467"),Object(l["a"])(Q,X,D,!1,null,"4232c682",null)),V=z.exports,$={name:"ApiDescription",components:{FunctionCard:V,ClassCard:U},data:function(){return{API:w}}},J=$,Y=Object(l["a"])(J,_,C,!1,null,"31bb864d",null),H=Y.exports,K=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Z=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",[e._v("ogc-client")])])}],ee={name:"LibName"},te=ee,ne=(n("0bde"),Object(l["a"])(te,K,Z,!1,null,"40416280",null)),re=ne.exports,ae={name:"Docs",components:{CodeBlock:E,ApiDescription:H,LibName:re}},se=ae,ie=Object(l["a"])(se,m,h,!1,null,"2ddbe7e6",null),oe=ie.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pb-5"},[n("h2",{staticClass:"my-4"},[e._v("WMS")]),n("p",[e._v(" Enter a WMS service URL below to get some information and a list of layers from it. ")]),n("WmsEndpoint"),n("h2",{staticClass:"my-4"},[e._v("WFS")]),n("p",[e._v(" Enter a WFS service URL below to get some information and a list of feature types from it. ")]),n("WfsEndpoint")],1)},ue=[],le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"d-flex flex-row"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"form-control me-3",attrs:{placeholder:"Enter a WMS service URL here"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.createEndpoint()}}},[e._v(" Analyze ")])]),e.loading?n("div",[e._v("Loading...")]):e._e(),e.loaded?n("div",[n("InfoList",{attrs:{info:e.endpoint.getServiceInfo()}}),n("ItemsTree",{staticStyle:{"min-height":"200px"},attrs:{items:e.endpoint.getLayers()},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item;return[n("div",{attrs:{title:r.abstract}},[r.name?[n("a",{staticClass:"link-light",attrs:{href:""},on:{click:function(t){return e.handleLayerClick(r,t)}}},[e._v(e._s(r.title))])]:[n("span",[e._v(e._s(r.title))])]],2)]}}],null,!1,139247298)}),e.selectedLayer?n("WmsLayerInfo",{attrs:{layer:e.selectedLayer,"endpoint-url":e.url}}):e._e()],1):e._e(),e.error?n("div",[e._v("Error: "+e._s(e.error))]):e._e()])},pe=[],de=n("1da1"),me=(n("96cf"),n("91c2")),he=n.n(me),fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dl",{staticClass:"small"},[e._l(e.propList,(function(t){return[n("dt",[e._v(e._s(t.title))]),n("dd",[e._v(e._s(t.description))])]}))],2)},ye=[],ge=(n("b64b"),{name:"InfoList",props:{info:Object},computed:{propList:function(){var e=this;return Object.keys(this.info).map((function(t){return{title:"".concat(t.substr(0,1).toUpperCase()).concat(t.substr(1)),description:"".concat(e.info[t])}}))}}}),ve=ge,be=(n("a8ac"),Object(l["a"])(ve,fe,ye,!1,null,"6c49f3f5",null)),Ee=be.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-dark small text-white p-2 rounded-1"},e._l(e.items,(function(t){return n("div",[n("TreeItem",{attrs:{item:t},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[e._t("default",null,{item:n})]}}],null,!0)})],1)})),0)},Ce=[],Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._t("default",[e._v(" tree item ")],{item:e.item}),e.hasChildren?n("div",{staticStyle:{"margin-left":"1rem"}},e._l(e.children,(function(t){return n("div",[n("div",{staticClass:"spacer-s"}),n("TreeItem",{attrs:{item:t},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[e._t("default",null,{item:n})]}}],null,!0)})],1)})),0):e._e()],2)},we=[],xe={name:"TreeItem",props:{item:Object},computed:{hasChildren:function(){return"children"in this.item},children:function(){return this.item.children}}},Te=xe,Pe=Object(l["a"])(Te,Se,we,!1,null,"006eb16a",null),Oe=Pe.exports,Fe={name:"ItemsTree",components:{TreeItem:Oe},props:{items:Array},mounted:function(){}},je=Fe,ke=Object(l["a"])(je,_e,Ce,!1,null,"2ef44cc0",null),Ie=ke.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v(e._s(e.layer.title))]),n("InfoList",{attrs:{info:e.layerInfo}}),n("div",{staticClass:"d-flex flex-row justify-content-between"},[n("label",[e._v(" Selected style: "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedStyle,expression:"selectedStyle"}],staticClass:"form-select d-inline-block w-auto",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedStyle=t.target.multiple?n:n[0]}}},e._l(e.layer.styles,(function(t){return n("option",{domProps:{value:t.name}},[e._v(" "+e._s(t.title)+" ")])})),0)]),n("label",[e._v(" Selected CRS: "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedCrs,expression:"selectedCrs"}],staticClass:"form-select d-inline-block w-auto",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedCrs=t.target.multiple?n:n[0]}}},e._l(e.layer.availableCrs,(function(t){return n("option",[e._v(" "+e._s(t)+" ")])})),0)])]),n("img",{attrs:{src:e.fullMapSrc,alt:"layer preview"}})],1)},Re=[],Me=n("5530"),Le=(n("3ca3"),n("2b3d"),n("25f0"),{name:"WmsLayerInfo",components:{InfoList:Ee},props:{layer:Object,endpointUrl:String},data:function(){return{selectedStyle:"",selectedCrs:""}},watch:{layer:{immediate:!0,handler:function(e){this.selectedStyle=e.styles.length>0?e.styles[0].name:"",this.selectedCrs=e.availableCrs[0]}}},computed:{layerInfo:function(){return Object(Me["a"])(Object(Me["a"])({name:this.layer.name},this.layer.abstract&&{abstract:this.layer.abstract}),this.layer.attribution&&this.layer.attribution.title&&{attribution:this.layer.attribution.title})},fullMapSrc:function(){if(!(this.selectedCrs in this.layer.boundingBoxes))return"";var e=this.layer.boundingBoxes[this.selectedCrs],t=(e[2]-e[0])/(e[3]-e[1]),n=500,r=Math.round(t>1?n:n*t),a=Math.round(r/t),s=new URL(this.endpointUrl);return s.searchParams.set("SERVICE","WMS"),s.searchParams.set("REQUEST","GetMap"),s.searchParams.set("LAYERS",this.layer.name),s.searchParams.set("STYLES",this.selectedStyle),s.searchParams.set("WIDTH",r.toString()),s.searchParams.set("HEIGHT",a.toString()),s.searchParams.set("FORMAT","image/png"),s.searchParams.set("CRS",this.selectedCrs),s.searchParams.set("BBOX",e.join(",")),s.toString()}}}),We=Le,Ae=Object(l["a"])(We,Ne,Re,!1,null,"469e236c",null),Ge=Ae.exports,Be={name:"WmsEndpoint",components:{WmsLayerInfo:Ge,ItemsTree:Ie,InfoList:Ee},data:function(){return{loading:!1,error:null,endpoint:null,url:"https://ahocevar.com/geoserver/wms",selectedLayer:null}},computed:{loaded:function(){return this.endpoint&&!1===this.loading&&null===this.error}},methods:{createEndpoint:function(){var e=this;return Object(de["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.error=null,e.loading=!0,e.endpoint=new he.a(e.url),t.prev=3,t.next=6,e.endpoint.isReady();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](3),e.error=t.t0.message;case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[3,8]])})))()},handleLayerClick:function(e,t){this.selectedLayer=this.endpoint.getLayerByName(e.name),t.preventDefault()}}},Ue=Be,Xe=Object(l["a"])(Ue,le,pe,!1,null,"51c46d2b",null),De=Xe.exports,qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"d-flex flex-row"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"form-control me-3",attrs:{placeholder:"Enter a WFS service URL here"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),n("div",{staticClass:"spacer-s"}),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.createEndpoint()}}},[e._v(" Analyze ")])]),e.loading?n("div",[e._v("Loading...")]):e._e(),e.loaded?n("div",[n("InfoList",{attrs:{info:e.endpoint.getServiceInfo()}}),n("ItemsTree",{staticStyle:{"min-height":"200px"},attrs:{items:e.endpoint.getFeatureTypes()},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item;return[n("div",{attrs:{title:r.abstract}},[r.name?[n("a",{staticClass:"link-light",attrs:{href:""},on:{click:function(t){return e.handleItemClick(r,t)}}},[e._v(e._s(r.title))])]:[n("span",[e._v(e._s(r.title))])]],2)]}}],null,!1,951100628)}),e.selectedFeatureType?n("WfsFeatureTypeInfo",{attrs:{"feature-type":e.selectedFeatureType,endpoint:e.endpoint}}):e._e()],1):e._e(),e.error?n("div",[e._v("Error: "+e._s(e.error))]):e._e()])},Qe=[],ze=n("b411"),Ve=n.n(ze),$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v(e._s(e.featureType.name))]),n("InfoList",{attrs:{info:e.featureTypeInfo}}),n("p",[e._v("Properties")]),n("InfoList",{attrs:{info:e.featureProperties}}),null!==e.featurePropsDetails||e.loadingValues?e._e():n("div",[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.loadValues()}}},[e._v(" Load unique values ")])]),e.loadingValues?n("div",[e._v("Loading unique values...")]):e._e(),null!==e.featurePropsDetails?n("div",[n("p",[e._v("Unique values")]),n("InfoList",{attrs:{info:e.uniqueValues}})],1):e._e()],1)},Je=[],Ye=n("ade3"),He=n("2909"),Ke=(n("4de4"),{name:"WfsFeatureTypeInfo",components:{InfoList:Ee},props:{featureType:Object,endpoint:Object},data:function(){return{loadingValues:!1,featurePropsDetails:null}},computed:{featureTypeInfo:function(){return Object(Me["a"])(Object(Me["a"])(Object(Me["a"])(Object(Me["a"])(Object(Me["a"])({},"title"in this.featureType&&{title:this.featureType.title}),"abstract"in this.featureType&&{abstract:this.featureType.abstract}),{},{CRS:[this.featureType.defaultCrs].concat(Object(He["a"])(this.featureType.otherCrs)).join(", ")},"objectCount"in this.featureType&&{"object count":this.featureType.objectCount}),"geometryName"in this.featureType&&{"geometry name":this.featureType.geometryName}),"geometryType"in this.featureType&&{"geometry type":this.featureType.geometryType})},featureProperties:function(){return Object(Me["a"])({},this.featureType.properties)},uniqueValues:function(){var e=this;return null===this.featurePropsDetails?{}:Object.keys(this.featurePropsDetails).reduce((function(t,n){return Object(Me["a"])(Object(Me["a"])({},t),{},Object(Ye["a"])({},n,e.featurePropsDetails[n].uniqueValues.sort((function(e,t){return t.count-e.count})).filter((function(e,t){return t<=8})).map((function(e,t){return t<8?"".concat(e.value," (").concat(e.count,")"):"..."})).join(", ")))}),{})}},methods:{loadValues:function(){var e=this;return Object(de["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingValues=!0,t.next=3,e.endpoint.getFeatureTypePropDetails(e.featureType.name);case 3:e.featurePropsDetails=t.sent,e.loadingValues=!1;case 5:case"end":return t.stop()}}),t)})))()}},watch:{featureType:function(){this.loadingValues=!1,this.featurePropsDetails=null}}}),Ze=Ke,et=Object(l["a"])(Ze,$e,Je,!1,null,"338bfa2b",null),tt=et.exports,nt={name:"WfsEndpoint",components:{WfsFeatureTypeInfo:tt,ItemsTree:Ie,InfoList:Ee},data:function(){return{loading:!1,error:null,endpoint:null,url:"https://ahocevar.com/geoserver/wfs",selectedFeatureType:null}},computed:{loaded:function(){return this.endpoint&&!1===this.loading&&null===this.error}},methods:{createEndpoint:function(){var e=this;return Object(de["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.error=null,e.loading=!0,e.endpoint=new Ve.a(e.url),t.prev=3,t.next=6,e.endpoint.isReady();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](3),e.error=t.t0.message;case 11:e.loading=!1;case 12:case"end":return t.stop()}}),t,null,[[3,8]])})))()},handleItemClick:function(e,t){var n=this;return Object(de["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.preventDefault(),r.next=3,n.endpoint.getFeatureTypeFull(e.name);case 3:n.selectedFeatureType=r.sent;case 4:case"end":return r.stop()}}),r)})))()}}},rt=nt,at=Object(l["a"])(rt,qe,Qe,!1,null,"b5c35d10",null),st=at.exports,it={name:"App",components:{WfsEndpoint:st,WmsEndpoint:De}},ot=it,ct=Object(l["a"])(ot,ce,ue,!1,null,null,null),ut=ct.exports,lt={name:"App",components:{Docs:oe,LibLogo:d,Demo:ut},data:function(){return{demoTabEnabled:!1}}},pt=lt,dt=(n("9789"),Object(l["a"])(pt,a,s,!1,null,"2c5966d3",null)),mt=dt.exports;hljs.initHighlightingOnLoad(),r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(mt)}}).$mount("#app")},6369:function(e,t,n){"use strict";var r=n("9523").default,a=n("ded3").default;n("b0c0"),n("2ca0"),n("4de4"),n("9129"),n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.parseFeatureTypeInfo=void 0;var s=n("8b0f");function i(e,t,n,i){var u=e.name,l=e.title,p=e.abstract,d=e.defaultCrs,m=e.otherCrs,h=e.outputFormats,f=e.latLonBoundingBox,y=i.startsWith("2.0")?"numberMatched":"numberOfFeatures",g=parseInt((0,s.getElementAttribute)((0,s.getRootElement)(n),y)),v=(0,s.findChildrenElement)((0,s.getRootElement)(t),"complexType",!0)[0],b=(0,s.findChildrenElement)(v,"element",!0),E=b.filter((function(e){return(0,s.getElementAttribute)(e,"type").startsWith("xsd:")})).reduce((function(e,t){return a(a({},e),{},r({},(0,s.getElementAttribute)(t,"name"),o((0,s.getElementAttribute)(t,"type"))))}),{}),_=b.filter((function(e){return(0,s.getElementAttribute)(e,"type").startsWith("gml:")}))[0],C=_?(0,s.getElementAttribute)(_,"name"):void 0,S=_?c((0,s.getElementAttribute)(_,"type")):void 0;return a(a(a(a(a(a(a(a(a({name:u},l&&{title:l}),p&&{abstract:p}),f&&{boundingBox:f}),d&&{defaultCrs:d}),m&&{otherCrs:m}),h&&{outputFormats:h}),{},{properties:E},C&&{geometryName:C}),S&&{geometryType:S}),!Number.isNaN(g)&&{objectCount:g})}function o(e){var t=e.indexOf(":")>-1?e.substr(e.indexOf(":")+1):e;switch(t){case"string":return"string";case"boolean":return"boolean";case"float":case"double":case"decimal":return"float";case"long":case"byte":case"integer":case"int":case"positiveInteger":case"negativeInteger":case"nonPositiveInteger":case"nonNegativeInteger":case"short":case"unsignedLong":case"unsignedInt":case"unsignedShort":case"unsignedByte":return"integer";default:return"string"}}function c(e){var t=e.indexOf(":")>-1?e.substr(e.indexOf(":")+1):e;switch(t){case"PointPropertyType":return"point";case"MultiPointPropertyType":return"multipoint";case"CurvePropertyType":case"LineStringPropertyType":return"linestring";case"MultiCurvePropertyType":case"MultiLineStringPropertyType":return"linestring";case"PolygonPropertyType":case"SurfacePropertyType":return"polygon";case"MultiPolygonPropertyType":case"MultiSurfacePropertyType":return"multipolygon";default:return"unknown"}}t.parseFeatureTypeInfo=i},8566:function(e,t,n){"use strict";var r=n("6374").default,a=n("c973").default;n("c1c3"),n("6c57"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("a15b"),n("25f0"),n("ac1f"),n("466d"),n("99af"),Object.defineProperty(t,"__esModule",{value:!0}),t.purgeEntries=t.useCache=t.readCacheEntry=t.hasValidCacheEntry=t.storeCacheEntry=t.getCacheExpiryDuration=t.setCacheExpiryDuration=void 0;var s=36e5;function i(e){s=e}function o(){return s}t.setCacheExpiryDuration=i,t.getCacheExpiryDuration=o;var c="caches"in globalThis?caches.open("ogc-client"):null;function u(e){return l.apply(this,arguments)}function l(){return l=a(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:for(n=u.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=u[a];return s="https://cache/"+r.join("/"),e.next=6,c;case 6:return i=e.sent,e.next=9,i.put(s,new Response(JSON.stringify(t),{headers:{"x-expiry":(Date.now()+o()).toString(10)}}));case 9:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function p(){return d.apply(this,arguments)}function d(){return d=a(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return",!1);case 2:for(t=i.length,n=new Array(t),r=0;r<t;r++)n[r]=i[r];return a="https://cache/"+n.join("/"),e.next=6,c;case 6:return s=e.sent,e.abrupt("return",s.match(a).then((function(e){return!!e&&parseInt(e.headers.get("x-expiry"))>Date.now()})));case 8:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function m(){return h.apply(this,arguments)}function h(){return h=a(regeneratorRuntime.mark((function e(){var t,n,r,a,s,i,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return",null);case 2:for(t=o.length,n=new Array(t),r=0;r<t;r++)n[r]=o[r];return a="https://cache/"+n.join("/"),e.next=6,c;case 6:return s=e.sent,e.next=9,s.match(a);case 9:return i=e.sent,e.abrupt("return",i?i.clone().json():null);case 11:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}t.storeCacheEntry=u,t.hasValidCacheEntry=p,t.readCacheEntry=m;var f=new Map;function y(e){return g.apply(this,arguments)}function g(){return g=a(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:for(n=c.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=c[a];return e.next=5,p.apply(void 0,r);case 5:if(!e.sent){e.next=7;break}return e.abrupt("return",m.apply(void 0,r));case 7:if(s=r.join("#"),!f.has(s)){e.next=10;break}return e.abrupt("return",f.get(s));case 10:return i=t(),i instanceof Promise&&(i.then((function(){return f.delete(s)})),f.set(s,i)),e.next=14,i;case 14:return o=e.sent,e.next=17,u.apply(void 0,[o].concat(r));case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function v(){return b.apply(this,arguments)}function b(){return b=a(regeneratorRuntime.mark((function e(){var t,n,a,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c;case 4:return t=e.sent,e.next=7,t.keys();case 7:n=e.sent,a=r(n),e.prev=9,a.s();case 11:if((s=a.n()).done){e.next=21;break}return i=s.value,e.next=15,t.match(i);case 15:if(o=e.sent,!(parseInt(o.headers.get("x-expiry"))<=Date.now())){e.next=19;break}return e.next=19,t.delete(i);case 19:e.next=11;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](9),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[9,23,26,29]])}))),b.apply(this,arguments)}t.useCache=y,t.purgeEntries=v},"8b0f":function(e,t,n){"use strict";var r=n("448a").default,a=n("970b").default,s=n("ed6d").default,i=n("2d0d").default,o=n("a128").default;n("b0c0"),n("99af"),n("4de4"),n("7db0"),Object.defineProperty(t,"__esModule",{value:!0}),t.getElementAttribute=t.getElementText=t.getChildrenElement=t.findChildElement=t.findChildrenElement=t.getElementName=t.getRootElement=t.stripNamespace=t.parseXmlString=t.XmlParseError=void 0;var c=n("6b49"),u=function(e){s(n,e);var t=i(n);function n(e){return a(this,n),t.call(this,e)}return n}(o(Error));function l(e){var t=null;try{t=(0,c.parseXml)(e)}catch(n){throw new u(n.message)}return t}function p(e){var t=e.indexOf(":");return t>-1?e.substr(t+1):e}function d(e){return e.children[0]}function m(e){return e.name||""}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=p(t);function s(e,t){return p(m(t))===a&&e.push(t),n&&Array.isArray(t.children)?[].concat(r(e),r(t.children.reduce(s,[]))):e}return e&&Array.isArray(e.children)?e.children.reduce(s,[]):[]}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return h(e,t,n)[0]||null}function y(e){return e&&Array.isArray(e.children)?r(e.children.filter((function(e){return e instanceof c.XmlElement}))):[]}function g(e){var t=e&&Array.isArray(e.children)?e.children.find((function(e){return"text"===e.type})):null;return t?t.text:""}function v(e,t){return e&&e.attributes[t]||""}t.XmlParseError=u,t.parseXmlString=l,t.stripNamespace=p,t.getRootElement=d,t.getElementName=m,t.findChildrenElement=h,t.findChildElement=f,t.getChildrenElement=y,t.getElementText=g,t.getElementAttribute=v},"902e":function(e,t,n){"use strict";n("ffa5")},"91c2":function(e,t,n){"use strict";var r=n("ded3").default,a=n("970b").default,s=n("5bc3").default;n("b0c0"),n("d81d"),Object.defineProperty(t,"__esModule",{value:!0});var i=n("f03e"),o=n("8566"),c=n("f490"),u=function(){function e(t){var n=this;a(this,e);var r=(0,c.setQueryParams)(t,{SERVICE:"WMS",REQUEST:"GetCapabilities"});this._capabilitiesPromise=(0,o.useCache)((function(){return(0,i.parseWmsCapabilities)(r)}),"WMS","CAPABILITIES",r).then((function(e){var t=e.info,r=e.layers,a=e.version;n._info=t,n._layers=r,n._version=a}))}return s(e,[{key:"isReady",value:function(){var e=this;return this._capabilitiesPromise.then((function(){return e}))}},{key:"getServiceInfo",value:function(){return this._info}},{key:"getLayers",value:function(){function e(t){return r({title:t.title,name:t.name,abstract:t.abstract},"children"in t&&{children:t.children.map(e)})}return this._layers.map(e)}},{key:"getLayerByName",value:function(e){var t=null;function n(r){null===t&&(r.name!==e?"children"in r&&r.children.map(n):t=r)}return this._layers.map(n),t}},{key:"getVersion",value:function(){return this._version}}]),e}();t.default=u},9307:function(e,t,n){"use strict";var r=n("6374").default;n("ac1f"),n("99af"),Object.defineProperty(t,"__esModule",{value:!0}),t.decodeString=void 0;var a=["utf-8","utf-16","iso-8859-1"],s="utf-8";function i(e){var t=/charset=([^;]+)/.exec(e);return t?t[1]:null}function o(e,t){var n,o=t?i(t):null,c=o?[o].concat(a):a,u=r(c);try{for(u.s();!(n=u.n()).done;){var l=n.value;try{var p=new TextDecoder(l,{fatal:!0});return p.decode(e)}catch(d){}}}catch(m){u.e(m)}finally{u.f()}return console.warn("XML document encoding could not be determined, falling back to ".concat(s,".")),new TextDecoder(s).decode(e)}t.decodeString=o},"96ff":function(e,t,n){"use strict";var r=n("970b").default;Object.defineProperty(t,"__esModule",{value:!0}),t.EndpointError=void 0;var a=function e(t,n,a){r(this,e),this.message=t,this.httpStatus=n,this.isCrossOriginRelated=a};t.EndpointError=a},9789:function(e,t,n){"use strict";n("e169")},a8ac:function(e,t,n){"use strict";n("0e7b")},a99a:function(e,t,n){},b03c:function(e,t,n){},b411:function(e,t,n){"use strict";var r=n("c973").default,a=n("278c").default,s=n("ded3").default,i=n("970b").default,o=n("5bc3").default;n("c1c3"),n("d81d"),n("b0c0"),n("7db0"),n("d3b7"),n("3ca3"),n("ddb0"),n("4de4"),n("99af"),Object.defineProperty(t,"__esModule",{value:!0});var c=n("f03e"),u=n("f490"),l=n("6369"),p=n("8566"),d=n("0abb"),m=n("8b0f"),h=function(){function e(t){var n=this;i(this,e),this._capabilitiesUrl=(0,u.setQueryParams)(t,{SERVICE:"WFS",REQUEST:"GetCapabilities"}),this._capabilitiesPromise=(0,p.useCache)((function(){return(0,c.parseWfsCapabilities)(n._capabilitiesUrl)}),"WFS","CAPABILITIES",this._capabilitiesUrl).then((function(e){var t=e.info,r=e.featureTypes,a=e.version;n._info=t,n._featureTypes=r,n._version=a}))}return o(e,[{key:"isReady",value:function(){var e=this;return this._capabilitiesPromise.then((function(){return e}))}},{key:"getServiceInfo",value:function(){return this._info}},{key:"getFeatureTypes",value:function(){return this._featureTypes.map((function(e){return s(s(s({name:e.name},"title"in e&&{title:e.title}),"abstract"in e&&{abstract:e.abstract}),"latLonBoundingBox"in e&&{boundingBox:e.latLonBoundingBox})}))}},{key:"_getFeatureTypeByName",value:function(e){if(!this._featureTypes)return null;var t=(0,m.stripNamespace)(e)!==e;return this._featureTypes.find((function(n){return t?n.name===e:(0,m.stripNamespace)(n.name)===e}))||null}},{key:"getFeatureTypeSummary",value:function(e){var t=this._getFeatureTypeByName(e);return t?s(s(s(s({name:t.name},"title"in t&&{title:t.title}),"abstract"in t&&{abstract:t.abstract}),"latLonBoundingBox"in t&&{boundingBox:t.latLonBoundingBox}),{},{defaultCrs:t.defaultCrs,otherCrs:t.otherCrs,outputFormats:t.outputFormats}):null}},{key:"getFeatureTypeFull",value:function(e){var t=this,n=this._getFeatureTypeByName(e);return n?(0,p.useCache)((function(){var r=(0,d.generateDescribeFeatureTypeUrl)(t._capabilitiesUrl,t._version,e),s=(0,d.generateGetFeatureUrl)(t._capabilitiesUrl,t._version,e,void 0,void 0,void 0,!0);return Promise.all([(0,u.queryXmlDocument)(r),(0,u.queryXmlDocument)(s)]).then((function(e){var r=a(e,2),s=r[0],i=r[1];return(0,l.parseFeatureTypeInfo)(n,s,i,t._version)}))}),"WFS","FEATURETYPEINFO",this._capabilitiesUrl,e):null}},{key:"getFeatureTypePropDetails",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getFeatureTypeFull(t);case 2:if(n=e.sent,null!==n){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",(0,p.useCache)((function(){return(0,c.queryWfsFeatureTypeDetails)(r._capabilitiesUrl,r._version,n).then((function(e){return e.props}))}),"WFS","FEATURETYPEPROPDETAILS",this._capabilitiesUrl,t));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getVersion",value:function(){return this._version}},{key:"_getJsonCompatibleOutputFormat",value:function(e){var t=this._getFeatureTypeByName(e);if(!t)throw new Error("The following feature type was not found in the service: ".concat(e));var n=t.outputFormats.filter((function(e){return e.toLowerCase().indexOf("json")>-1}));return n.length?n[0]:null}},{key:"supportsJson",value:function(e){return this._featureTypes?!!this._getJsonCompatibleOutputFormat(e):null}},{key:"getFeatureUrl",value:function(e,t){if(!this._featureTypes)return null;var n=t||{},r=n.maxFeatures,a=n.asJson,s=n.outputFormat,i=n.outputCrs,o=n.extent,c=n.extentCrs,u=this._getFeatureTypeByName(e);if(!u)throw new Error("The following feature type was not found in the service: ".concat(e));var l=s;if(a){if(l=this._getJsonCompatibleOutputFormat(e)||void 0,!l)throw new Error("The endpoint does not appear to support GeoJSON for the feature type ".concat(u.name))}else s&&-1===u.outputFormats.indexOf(s)&&console.warn("The following output format type was not found in the feature type ".concat(u.name,": ").concat(s));return(0,d.generateGetFeatureUrl)(this._capabilitiesUrl,this._version,u.name,l,r,void 0,void 0,i,o,c)}}]),e}();t.default=h},b467:function(e,t,n){"use strict";n("f0d7")},dfcf:function(e,t,n){"use strict";var r=n("ded3").default,a=n("c973").default;n("c1c3"),n("d3b7"),n("6c57"),Object.defineProperty(t,"__esModule",{value:!0}),t.addTaskHandler=t.sendTaskRequest=void 0;var s=n("f0ac");function i(e,t,n){return new Promise((function(r,a){var i=(0,s.getUniqueId)(),o={requestId:i,taskName:e,params:n};null===t?globalThis.dispatchEvent(new CustomEvent("ogc-client.request",{detail:o})):t.postMessage(o);var c=function(e){e.requestId===i&&(null===t?globalThis.removeEventListener("message",u):t.removeEventListener("message",l),"error"in e?a(e.error):r(e.response))},u=function(e){return c(e.detail)},l=function(e){return c(e.data)};null===t?globalThis.addEventListener("ogc-client.response",u):t.addEventListener("message",l)}))}function o(e,t,n){var s="undefined"!==typeof WorkerGlobalScope,i=function(){var i=a(regeneratorRuntime.mark((function a(i){var o,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i.taskName!==e){a.next=12;break}return a.prev=1,a.next=4,n(i.params);case 4:o=a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),c=a.t0;case 10:u=r(r({taskName:e,requestId:i.requestId},o&&{response:o}),c&&{error:c}),s?t.postMessage(u):t.dispatchEvent(new CustomEvent("ogc-client.response",{detail:u}));case 12:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(e){return i.apply(this,arguments)}}();s?t.addEventListener("message",(function(e){return i(e.data)})):t.addEventListener("ogc-client.request",(function(e){return i(e.detail)}))}t.sendTaskRequest=i,t.addTaskHandler=o},e169:function(e,t,n){},f03e:function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),Object.defineProperty(t,"__esModule",{value:!0}),t.queryWfsFeatureTypeDetails=t.parseWfsCapabilities=t.parseWmsCapabilities=t.enableFallbackWithoutWorker=void 0;var r,a=n("dfcf"),s=!1;function i(){s=!0}function o(){return s?null:(r||(r=new Worker(URL.createObjectURL(new Blob(['function e(e,t,n){const r="undefined"!=typeof WorkerGlobalScope,s=async s=>{if(s.taskName===e){let i,o;try{i=await n(s.params)}catch(e){o=e}const a=Object.assign(Object.assign({taskName:e,requestId:s.requestId},i&&{response:i}),o&&{error:o});r?t.postMessage(a):t.dispatchEvent(new CustomEvent("ogc-client.response",{detail:a}))}};r?t.addEventListener("message",(e=>s(e.data))):t.addEventListener("ogc-client.request",(e=>s(e.detail)))}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={},r={},s={};Object.defineProperty(s,"__esModule",{value:!0}),s.StringScanner=void 0;const i=/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;s.StringScanner=class{constructor(e){if(this.charCount=this.charLength(e,!0),this.charIndex=0,this.length=e.length,this.multiByteMode=this.charCount!==this.length,this.string=e,this.multiByteMode){let t=[];for(let n=0,r=0;r<this.charCount;++r)t[r]=n,n+=e.codePointAt(n)>65535?2:1;this.charsToBytes=t}}get isEnd(){return this.charIndex>=this.charCount}charIndexToByteIndex(e=this.charIndex){return this.multiByteMode?this.charsToBytes[e]??1/0:e}charLength(e,t=this.multiByteMode){return t?e.replace(i,"_").length:e.length}advance(e=1){this.charIndex=Math.min(this.charCount,this.charIndex+e)}consume(e=1){let t=this.peek(e);return this.advance(e),t}consumeMatch(e){if(!e.sticky)throw new Error(\'`regex` must have a sticky flag ("y")\');e.lastIndex=this.charIndexToByteIndex();let t=e.exec(this.string);if(null===t||0===t.length)return"";let n=t[0];return this.advance(this.charLength(n)),n}consumeMatchFn(e){let t,n="";for(;(t=this.peek())&&e(t);)n+=t,this.advance();return n}consumeString(e){if(this.consumeStringFast(e))return e;if(this.multiByteMode){let{length:t}=e,n=this.charLength(e);if(n!==t&&e===this.peek(n))return this.advance(n),e}return""}consumeStringFast(e){let{length:t}=e;return this.peek(t)===e?(this.advance(t),e):""}consumeUntilMatch(e){let t=this.string.slice(this.charIndexToByteIndex()),n=t.search(e);if(n<=0)return"";let r=t.slice(0,n);return this.advance(this.charLength(r)),r}consumeUntilString(e){let{string:t}=this,n=this.charIndexToByteIndex(),r=t.indexOf(e,n);if(r<=0)return"";let s=t.slice(n,r);return this.advance(this.charLength(s)),s}peek(e=1){let{charIndex:t,multiByteMode:n,string:r}=this;return n?t>=this.charCount?"":r.slice(this.charIndexToByteIndex(t),this.charIndexToByteIndex(t+e)):r.slice(t,t+e)}reset(e=0){this.charIndex=e>=0?Math.min(this.charCount,e):Math.max(0,this.charIndex+e)}};var o={};function a(e){let t=u(e);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||45===t||46===t||183===t||t>=768&&t<=879||t>=8255&&t<=8256||c(e,t)}function c(e,t=u(e)){return t>=97&&t<=122||t>=65&&t<=90||58===t||95===t||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=767||t>=880&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function u(e){return e.codePointAt(0)||-1}Object.defineProperty(o,"__esModule",{value:!0}),o.isXmlCodePoint=o.isWhitespace=o.isReferenceChar=o.isNameStartChar=o.isNameChar=o.predefinedEntities=o.endCharData=o.attValueNormalizedWhitespace=o.attValueCharSingleQuote=o.attValueCharDoubleQuote=void 0,o.attValueCharDoubleQuote=/[^"&<]+/y,o.attValueCharSingleQuote=/[^\'&<]+/y,o.attValueNormalizedWhitespace=/[\\t\\n]/g,o.endCharData=/<|&|]]>/,o.predefinedEntities=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"\'",gt:">",lt:"<",quot:\'"\'})),o.isNameChar=a,o.isNameStartChar=c,o.isReferenceChar=function(e){return"#"===e||a(e)},o.isWhitespace=function(e){let t=u(e);return 32===t||9===t||10===t||13===t},o.isXmlCodePoint=function(e){return 9===e||10===e||13===e||e>=32&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111};var l={},h={};Object.defineProperty(h,"__esModule",{value:!0}),h.XmlNode=void 0;class d{constructor(){this.parent=null}get document(){return this.parent?.document??null}get isRootNode(){return null!==this.parent&&this.parent===this.document}get preserveWhitespace(){return Boolean(this.parent?.preserveWhitespace)}get type(){return""}toJSON(){let e={type:this.type};return this.isRootNode&&(e.isRootNode=!0),this.preserveWhitespace&&(e.preserveWhitespace=!0),e}}h.XmlNode=d,d.TYPE_CDATA="cdata",d.TYPE_COMMENT="comment",d.TYPE_DOCUMENT="document",d.TYPE_ELEMENT="element",d.TYPE_PROCESSING_INSTRUCTION="pi",d.TYPE_TEXT="text";var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.XmlText=void 0;const f=h;class p extends f.XmlNode{constructor(e=""){super(),this.text=e}get type(){return f.XmlNode.TYPE_TEXT}toJSON(){return Object.assign(f.XmlNode.prototype.toJSON.call(this),{text:this.text})}}m.XmlText=p,Object.defineProperty(l,"__esModule",{value:!0}),l.XmlCdata=void 0;const g=h,S=m;class E extends S.XmlText{get type(){return g.XmlNode.TYPE_CDATA}}l.XmlCdata=E;var P={};Object.defineProperty(P,"__esModule",{value:!0}),P.XmlComment=void 0;const y=h;class b extends y.XmlNode{constructor(e=""){super(),this.content=e}get type(){return y.XmlNode.TYPE_COMMENT}toJSON(){return Object.assign(y.XmlNode.prototype.toJSON.call(this),{content:this.content})}}P.XmlComment=b;var v={},x={};Object.defineProperty(x,"__esModule",{value:!0}),x.XmlElement=void 0;const O=h;class C extends O.XmlNode{constructor(e,t=Object.create(null),n=[]){super(),this.name=e,this.attributes=t,this.children=n}get isEmpty(){return 0===this.children.length}get preserveWhitespace(){let e=this;for(;e instanceof C;){if("xml:space"in e.attributes)return"preserve"===e.attributes["xml:space"];e=e.parent}return!1}get text(){return this.children.map((e=>"text"in e?e.text:"")).join("")}get type(){return O.XmlNode.TYPE_ELEMENT}toJSON(){return Object.assign(O.XmlNode.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map((e=>e.toJSON()))})}}x.XmlElement=C,Object.defineProperty(v,"__esModule",{value:!0}),v.XmlDocument=void 0;const w=x,N=h;class T extends N.XmlNode{constructor(e=[]){super(),this.children=e}get document(){return this}get root(){for(let e of this.children)if(e instanceof w.XmlElement)return e;return null}get text(){return this.children.map((e=>"text"in e?e.text:"")).join("")}get type(){return N.XmlNode.TYPE_DOCUMENT}toJSON(){return Object.assign(N.XmlNode.prototype.toJSON.call(this),{children:this.children.map((e=>e.toJSON()))})}}v.XmlDocument=T;var X={};Object.defineProperty(X,"__esModule",{value:!0}),X.XmlProcessingInstruction=void 0;const G=h;class M extends G.XmlNode{constructor(e,t=""){super(),this.name=e,this.content=t}get type(){return G.XmlNode.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(G.XmlNode.prototype.toJSON.call(this),{name:this.name,content:this.content})}}X.XmlProcessingInstruction=M;var j=t&&t.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),F=t&&t.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),I=t&&t.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&j(t,e,n);return F(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.Parser=void 0;const _=s,A=I(o),R=l,D=P,W=v,L=x,U=X,B=m;r.Parser=class{constructor(e,t={}){if(this.document=new W.XmlDocument,this.currentNode=this.document,this.options=t,this.scanner=new _.StringScanner(function(e){"\\ufeff"===e[0]&&(e=e.slice(1));return e.replace(/\\r\\n?/g,"\\n")}(e)),this.consumeProlog(),!this.consumeElement())throw this.error("Root element is missing or invalid");for(;this.consumeMisc(););if(!this.scanner.isEnd)throw this.error("Extra content at the end of the document")}addNode(e){e.parent=this.currentNode,this.currentNode.children.push(e)}addText(e){let{children:t}=this.currentNode,{length:n}=t;if(n>0){let r=t[n-1];if(r instanceof B.XmlText)return void(r.text+=e)}this.addNode(new B.XmlText(e))}consumeAttributes(){let e=Object.create(null);for(;this.consumeWhitespace();){let t=this.consumeName();if(!t)break;let n=this.consumeEqual()&&this.consumeAttributeValue();if(!1===n)throw this.error("Attribute value expected");if(t in e)throw this.error(`Duplicate attribute: ${t}`);if("xml:space"===t&&"default"!==n&&"preserve"!==n)throw this.error(\'Value of the `xml:space` attribute must be "default" or "preserve"\');e[t]=n}if(this.options.sortAttributes){let t=Object.keys(e).sort(),n=Object.create(null);for(let r=0;r<t.length;++r){let s=t[r];n[s]=e[s]}e=n}return e}consumeAttributeValue(){let e,{scanner:t}=this,n=t.peek();if(\'"\'!==n&&"\'"!==n)return!1;t.advance();let r=!1,s="",i=\'"\'===n?A.attValueCharDoubleQuote:A.attValueCharSingleQuote;e:for(;!t.isEnd;)switch(e=t.consumeMatch(i),e&&(this.validateChars(e),s+=e.replace(A.attValueNormalizedWhitespace," ")),t.peek()){case n:r=!0;break e;case"&":s+=this.consumeReference();continue;case"<":throw this.error("Unescaped `<` is not allowed in an attribute value");case"":break e}if(!r)throw this.error("Unclosed attribute");return t.advance(),s}consumeCdataSection(){let{scanner:e}=this;if(!e.consumeStringFast("<![CDATA["))return!1;let t=e.consumeUntilString("]]>");if(this.validateChars(t),!e.consumeStringFast("]]>"))throw this.error("Unclosed CDATA section");return this.options.preserveCdata?this.addNode(new R.XmlCdata(t)):this.addText(t),!0}consumeCharData(){let{scanner:e}=this,t=e.consumeUntilMatch(A.endCharData);if(!t)return!1;if(this.validateChars(t),"]]>"===e.peek(3))throw this.error("Element content may not contain the CDATA section close delimiter `]]>`");return this.addText(t),!0}consumeComment(){let{scanner:e}=this;if(!e.consumeStringFast("\\x3c!--"))return!1;let t=e.consumeUntilString("--");if(this.validateChars(t),!e.consumeStringFast("--\\x3e")){if("--"===e.peek(2))throw this.error("The string `--` isn\'t allowed inside a comment");throw this.error("Unclosed comment")}return this.options.preserveComments&&this.addNode(new D.XmlComment(t.trim())),!0}consumeContentReference(){let e=this.consumeReference();return!!e&&(this.addText(e),!0)}consumeDoctypeDeclaration(){let{scanner:e}=this;if(!e.consumeStringFast("<!DOCTYPE")||!this.consumeWhitespace())return!1;if(e.consumeMatch(/[^[>]+/y),e.consumeMatch(/\\[[\\s\\S]+?\\][\\x20\\t\\r\\n]*>/y))return!0;if(!e.consumeStringFast(">"))throw this.error("Unclosed doctype declaration");return!0}consumeElement(){let{scanner:e}=this,t=e.charIndex;if(!e.consumeStringFast("<"))return!1;let n=this.consumeName();if(!n)return e.reset(t),!1;let r=this.consumeAttributes(),s=Boolean(e.consumeStringFast("/>")),i=new L.XmlElement(n,r);if(i.parent=this.currentNode,!s){if(!e.consumeStringFast(">"))throw this.error(`Unclosed start tag for element \\`${n}\\``);this.currentNode=i;do{this.consumeCharData()}while(this.consumeElement()||this.consumeContentReference()||this.consumeCdataSection()||this.consumeProcessingInstruction()||this.consumeComment());let t,r=e.charIndex;if(!e.consumeStringFast("</")||!(t=this.consumeName())||t!==n)throw e.reset(r),this.error(`Missing end tag for element ${n}`);if(this.consumeWhitespace(),!e.consumeStringFast(">"))throw this.error(`Unclosed end tag for element ${n}`);this.currentNode=i.parent}return this.addNode(i),!0}consumeEqual(){return this.consumeWhitespace(),!!this.scanner.consumeStringFast("=")&&(this.consumeWhitespace(),!0)}consumeMisc(){return this.consumeComment()||this.consumeProcessingInstruction()||this.consumeWhitespace()}consumeName(){return A.isNameStartChar(this.scanner.peek())?this.scanner.consumeMatchFn(A.isNameChar):""}consumeProcessingInstruction(){let{scanner:e}=this,t=e.charIndex;if(!e.consumeStringFast("<?"))return!1;let n=this.consumeName();if(!n)throw this.error("Invalid processing instruction");if("xml"===n.toLowerCase())throw e.reset(t),this.error("XML declaration isn\'t allowed here");if(!this.consumeWhitespace()){if(e.consumeStringFast("?>"))return this.addNode(new U.XmlProcessingInstruction(n)),!0;throw this.error("Whitespace is required after a processing instruction name")}let r=e.consumeUntilString("?>");if(this.validateChars(r),!e.consumeStringFast("?>"))throw this.error("Unterminated processing instruction");return this.addNode(new U.XmlProcessingInstruction(n,r)),!0}consumeProlog(){let{scanner:e}=this,t=e.charIndex;for(this.consumeXmlDeclaration();this.consumeMisc(););if(this.consumeDoctypeDeclaration())for(;this.consumeMisc(););return t<e.charIndex}consumeReference(){let{scanner:e}=this;if(!e.consumeStringFast("&"))return!1;let t,n=e.consumeMatchFn(A.isReferenceChar);if(";"!==e.consume())throw this.error("Unterminated reference (a reference must end with `;`)");if("#"===n[0]){let e="x"===n[1]?parseInt(n.slice(2),16):parseInt(n.slice(1),10);if(isNaN(e))throw this.error("Invalid character reference");if(!A.isXmlCodePoint(e))throw this.error("Character reference resolves to an invalid character");t=String.fromCodePoint(e)}else if(t=A.predefinedEntities[n],void 0===t){let{ignoreUndefinedEntities:t,resolveUndefinedEntity:r}=this.options,s=`&${n};`;if(r){let e=r(s);if(null!=e){let t=typeof e;if("string"!==t)throw new TypeError(`\\`resolveUndefinedEntity()\\` must return a string, \\`null\\`, or \\`undefined\\`, but returned a value of type ${t}`);return e}}if(t)return s;throw e.reset(-s.length),this.error(`Named entity isn\'t defined: ${s}`)}return t}consumeSystemLiteral(){let{scanner:e}=this,t=e.consumeStringFast(\'"\')||e.consumeStringFast("\'");if(!t)return!1;let n=e.consumeUntilString(t);if(this.validateChars(n),!e.consumeStringFast(t))throw this.error("Missing end quote");return n}consumeWhitespace(){return Boolean(this.scanner.consumeMatchFn(A.isWhitespace))}consumeXmlDeclaration(){let{scanner:e}=this;if(!e.consumeStringFast("<?xml"))return!1;if(!this.consumeWhitespace())throw this.error("Invalid XML declaration");let t=Boolean(e.consumeStringFast("version"))&&this.consumeEqual()&&this.consumeSystemLiteral();if(!1===t)throw this.error("XML version is missing or invalid");if(!/^1\\.[0-9]+$/.test(t))throw this.error("Invalid character in version number");if(this.consumeWhitespace()){Boolean(e.consumeStringFast("encoding"))&&this.consumeEqual()&&this.consumeSystemLiteral()&&this.consumeWhitespace();let t=Boolean(e.consumeStringFast("standalone"))&&this.consumeEqual()&&this.consumeSystemLiteral();if(t){if("yes"!==t&&"no"!==t)throw this.error(\'Only "yes" and "no" are permitted as values of `standalone`\');this.consumeWhitespace()}}if(!e.consumeStringFast("?>"))throw this.error("Invalid or unclosed XML declaration");return!0}error(e){let{charIndex:t,string:n}=this.scanner,r=1,s="",i=1;for(let e=0;e<t;++e){let t=n[e];"\\n"===t?(r=1,s="",i+=1):(r+=1,s+=t)}let o=n.indexOf("\\n",t);s+=-1===o?n.slice(t):n.slice(t,o);let a=0;s.length>50&&(r<40?s=s.slice(0,50):(a=r-20,s=s.slice(a,r+30)));let c=new Error(`${e} (line ${i}, column ${r})\\n  ${s}\\n`+" ".repeat(r-a+1)+"^\\n");return Object.assign(c,{column:r,excerpt:s,line:i,pos:t}),c}validateChars(e){let{length:t}=e;for(let n=0;n<t;++n){let t=e.codePointAt(n);if(!A.isXmlCodePoint(t))throw this.scanner.reset(-([...e].length-n)),this.error("Invalid character");t>65535&&(n+=1)}}};var k={};Object.defineProperty(k,"__esModule",{value:!0}),function(e){var n=t&&t.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=t&&t.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseXml=e.XmlText=e.XmlProcessingInstruction=e.XmlNode=e.XmlElement=e.XmlDocument=e.XmlComment=e.XmlCdata=void 0;const i=r;s(k,e);var o=l;Object.defineProperty(e,"XmlCdata",{enumerable:!0,get:function(){return o.XmlCdata}});var a=P;Object.defineProperty(e,"XmlComment",{enumerable:!0,get:function(){return a.XmlComment}});var c=v;Object.defineProperty(e,"XmlDocument",{enumerable:!0,get:function(){return c.XmlDocument}});var u=x;Object.defineProperty(e,"XmlElement",{enumerable:!0,get:function(){return u.XmlElement}});var d=h;Object.defineProperty(e,"XmlNode",{enumerable:!0,get:function(){return d.XmlNode}});var f=X;Object.defineProperty(e,"XmlProcessingInstruction",{enumerable:!0,get:function(){return f.XmlProcessingInstruction}});var p=m;Object.defineProperty(e,"XmlText",{enumerable:!0,get:function(){return p.XmlText}}),e.parseXml=function(e,t){return new i.Parser(e,t).document}}(n);class $ extends Error{constructor(e){super(e)}}function V(e){const t=e.indexOf(":");return t>-1?e.substr(t+1):e}function Y(e){return e.children[0]}function q(e){return e.name||""}function J(e,t,n=!1){const r=V(t);return e&&Array.isArray(e.children)?e.children.reduce((function e(t,s){return V(q(s))===r&&t.push(s),n&&Array.isArray(s.children)?[...t,...s.children.reduce(e,[])]:t}),[]):[]}function Q(e,t,n=!1){return J(e,t,n)[0]||null}function K(e){return e&&Array.isArray(e.children)?[...e.children.filter((e=>e instanceof n.XmlElement))]:[]}function z(e){const t=e&&Array.isArray(e.children)?e.children.find((e=>"text"===e.type)):null;return t?t.text:""}function H(e,t){return e&&e.attributes[t]||""}class Z{constructor(e,t,n){this.message=e,this.httpStatus=t,this.isCrossOriginRelated=n}}const ee=["utf-8","utf-16","iso-8859-1"];const te=new Map;function ne(e){return function(e,t="GET"){const n=`${t}#${e}`;if(te.has(n))return te.get(n);const r=fetch(e,{method:t}).catch((e=>e)).then((e=>(te.delete(n),e)));return te.set(n,r),r.then((e=>{if(e instanceof Error)throw e;return e}))}(e).catch((()=>fetch(e,{method:"HEAD",mode:"no-cors"}).catch((e=>{throw new Z(`Fetching the document failed either due to network errors or unreachable host, error is: ${e.message}`,0,!1)})).then((()=>{throw new Z("The document could not be fetched due to CORS limitations",0,!0)})))).then((async e=>{if(!e.ok){const t=await e.text();throw new Z(`Received an error with code ${e.status}: ${t}`,e.status,!1)}return function(e,t){const n=t?function(e){const t=/charset=([^;]+)/.exec(e);return t?t[1]:null}(t):null,r=n?[n,...ee]:ee;for(const t of r)try{return new TextDecoder(t,{fatal:!0}).decode(e)}catch(e){}return console.warn("XML document encoding could not be determined, falling back to utf-8."),new TextDecoder("utf-8").decode(e)}(await e.arrayBuffer(),e.headers.get("Content-Type"))})).then((e=>function(e){let t=null;try{t=n.parseXml(e)}catch(e){throw new $(e.message)}return t}(e)))}function re(e,t){const n=e.match(/(https?%3A%2F%2F[^/]+)$/);if(n){const r=n[1],s=re(decodeURIComponent(r),t);return e.replace(r,encodeURIComponent(s))}const r=new URL(e),s=Object.keys(t),i=s.map((e=>e.toLowerCase())),o=[];for(const e of r.searchParams.keys())i.indexOf(e.toLowerCase())>-1&&o.push(e);return o.map((e=>r.searchParams.delete(e))),s.forEach((e=>r.searchParams.set(e,!0===t[e]?"":t[e]))),r.toString()}const se=["EPSG:4046","EPSG:4075","EPSG:4120","EPSG:4122","EPSG:4124","EPSG:4126","EPSG:4149","EPSG:4151","EPSG:4153","EPSG:4155","EPSG:4157","EPSG:4159","EPSG:4161","EPSG:4163","EPSG:4165","EPSG:4167","EPSG:4169","EPSG:4171","EPSG:4173","EPSG:4175","EPSG:4178","EPSG:4180","EPSG:4182","EPSG:4184","EPSG:4188","EPSG:4190","EPSG:4191","EPSG:4196","EPSG:4198","EPSG:4202","EPSG:4210","EPSG:4211","EPSG:4214","EPSG:4226","EPSG:4229","EPSG:4231","EPSG:4233","EPSG:4236","EPSG:4238","EPSG:4240","EPSG:4242","EPSG:4244","EPSG:4246","EPSG:4248","EPSG:4250","EPSG:4252","EPSG:4255","EPSG:4258","EPSG:4261","EPSG:4264","EPSG:4267","EPSG:4270","EPSG:4273","EPSG:4276","EPSG:4279","EPSG:4281","EPSG:4284","EPSG:4286","EPSG:4288","EPSG:4292","EPSG:4295","EPSG:4297","EPSG:4299","EPSG:4302","EPSG:4324","EPSG:4326"];function ie(e){if(/^urn:(?:x-)?ogc:def:crs:epsg:/.test(e.toLowerCase())){return`EPSG:${/([0-9]+)$/.exec(e)[1]}`}return e}function oe(e){return Y(e).attributes.version}function ae(e){const t=oe(e);return J(Q(Y(e),"Capability"),"Layer").map((e=>ue(e,t)))}function ce(e){const t=Q(Y(e),"Service"),n=J(Q(t,"KeywordList"),"Keyword").map(z).filter(((e,t,n)=>n.indexOf(e)===t));return{title:z(Q(t,"Title")),name:z(Q(t,"Name")),abstract:z(Q(t,"Abstract")),fees:z(Q(t,"Fees")),constraints:z(Q(t,"AccessConstraints")),keywords:n}}function ue(e,t,n=[],r=[],s=null){const i="1.3.0"===t?"CRS":"SRS",o=J(e,i).map(z),a=o.length>0?o:n,c=J(e,"Style").map(le),u=c.length>0?c:r;function l(e){const n=H(e,i);var r;return(r=n,se.indexOf(ie(r))>-1&&"1.3.0"===t?["miny","minx","maxy","maxx"]:["minx","miny","maxx","maxy"]).map((t=>H(e,t)))}const h=Q(e,"Attribution"),d=null!==h?function(e){const t=H(Q(Q(e,"LogoURL"),"OnlineResource"),"xlink:href"),n=H(Q(e,"OnlineResource"),"xlink:href"),r=z(Q(e,"Title"));return Object.assign(Object.assign(Object.assign({},r&&{title:r}),n&&{url:n}),t&&{logoUrl:t})}(h):s,m=J(e,"Layer").map((e=>ue(e,t,a,u,d)));return Object.assign({name:z(Q(e,"Name")),title:z(Q(e,"Title")),abstract:z(Q(e,"Abstract")),availableCrs:a,styles:u,attribution:d,boundingBoxes:J(e,"BoundingBox").reduce(((e,t)=>Object.assign(Object.assign({},e),{[H(t,i)]:l(t)})),{})},m.length&&{children:m})}function le(e){const t=H(Q(Q(e,"LegendURL"),"OnlineResource"),"xlink:href");return Object.assign({name:z(Q(e,"Name")),title:z(Q(e,"Title"))},t&&{legendUrl:t})}function he(e){return Y(e).attributes.version}function de(e){let t;if(he(e).startsWith("1.0")){const n=Q(Q(Q(Y(e),"Capability"),"Request"),"GetFeature");t=K(Q(n,"ResultFormat")).map(q)}else{const n=J(Q(Y(e),"OperationsMetadata"),"Operation").find((e=>"GetFeature"===H(e,"name"))),r=J(n,"Parameter").find((e=>"outputFormat"===H(e,"name")));t=J(r,"Value",!0).map(z)}return t}function me(e){const t=he(e),n=t.startsWith("1.0")?"Service":"ServiceIdentification",r=t.startsWith("1.0")?"Name":"ServiceType",s=Q(Y(e),n);let i;return i=t.startsWith("1.0")?z(Q(s,"Keywords")).split(",").map((e=>e.trim())):J(Q(s,"Keywords"),"Keyword").map(z),{title:z(Q(s,"Title")),name:z(Q(s,r)),abstract:z(Q(s,"Abstract")),fees:z(Q(s,"Fees")),constraints:z(Q(s,"AccessConstraints")),keywords:i,outputFormats:de(e)}}function fe(e){const t=he(e),n=de(e);return J(Q(Y(e),"FeatureTypeList"),"FeatureType").map((e=>function(e,t,n){const r=t.startsWith("2.")?"CRS":"SRS",s=t.startsWith("1.0")?"SRS":`Default${r}`;function i(){const t=Q(e,"LatLongBoundingBox");return["minx","miny","maxx","maxy"].map((e=>H(t,e))).map(parseFloat)}function o(){const t=Q(e,"WGS84BoundingBox");return["LowerCorner","UpperCorner"].map((e=>Q(t,e))).map((e=>z(e).split(" "))).reduce(((e,t)=>[...e,...t])).map(parseFloat)}const a=t.startsWith("1.0")?[]:J(e,`Other${r}`).map(z).map(ie),c=t.startsWith("1.0")?[]:J(Q(e,"OutputFormats"),"Format").map(z);return{name:z(Q(e,"Name")),title:z(Q(e,"Title")),abstract:z(Q(e,"Abstract")),defaultCrs:ie(z(Q(e,s))),otherCrs:a,outputFormats:c.length>0?c:n,latLonBoundingBox:t.startsWith("1.0")?i():o()}}(e,t,n)))}function pe(e,t,n){const r=Y(e);let s;if(n.startsWith("2.0"))s=J(r,"member").map((e=>K(e)[0]));else{const e=Q(r,"featureMembers");s=e?K(e):J(r,"featureMember").map((e=>K(e)[0]))}const i="1.0.0"===n?"fid":"gml:id";function o(e,n){switch(t.properties[e]){case"integer":return parseInt(n);case"float":return parseFloat(n);case"boolean":return"true"===n;default:return n}}function a(e){return K(e).filter((e=>V(q(e))in t.properties)).reduce(((e,t)=>{const n=V(q(t));return Object.assign(Object.assign({},e),{[n]:o(n,z(t))})}),{})}return s.map((e=>({id:H(e,i),properties:a(e)})))}function ge(e,t,n,r,s,i,o,a,c,u){const l="2.0.0"===t?"COUNT":"MAXFEATURES",h={SERVICE:"WFS",REQUEST:"GetFeature",VERSION:t,["2.0.0"===t?"TYPENAMES":"TYPENAME"]:n};if(void 0!==r&&(h.OUTPUTFORMAT=r),void 0!==i&&(h.PROPERTYNAME=i.join(",")),o?(h.RESULTTYPE="hits",h[l]="1"):void 0!==s&&(h[l]=s.toString(10)),a&&(h.SRSNAME=a),c){const e=c.join(",");h.BBOX=u?`${e},${u}`:e}return re(e,h)}e("parseWmsCapabilities",globalThis,(({url:e})=>ne(e).then((e=>({info:ce(e),layers:ae(e),version:oe(e)}))))),e("parseWfsCapabilities",globalThis,(({url:e})=>ne(e).then((e=>({info:me(e),featureTypes:fe(e),version:he(e)}))))),e("queryWfsFeatureTypeDetails",globalThis,(({url:e,serviceVersion:t,featureTypeFull:n})=>ne(ge(e,t,n.name,void 0,void 0,Object.keys(n.properties))).then((e=>{return{props:(r=pe(e,n,t),r.reduce(((e,t)=>{for(const n in t.properties){const r=t.properties[n];n in e||(e[n]={uniqueValues:[]});const s=e[n].uniqueValues.find((e=>e.value===r));s?s.count++:e[n].uniqueValues.push({value:r,count:1})}return e}),{}))};var r}))));\n'],{type:"application/javascript"})),{type:"module"})),r)}function c(e){return(0,a.sendTaskRequest)("parseWmsCapabilities",o(),{url:e})}function u(e){return(0,a.sendTaskRequest)("parseWfsCapabilities",o(),{url:e})}function l(e,t,n){return(0,a.sendTaskRequest)("queryWfsFeatureTypeDetails",o(),{url:e,serviceVersion:t,featureTypeFull:n})}t.enableFallbackWithoutWorker=i,t.parseWmsCapabilities=c,t.parseWfsCapabilities=u,t.queryWfsFeatureTypeDetails=l},f0ac:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueId=void 0;var r=0;function a(){return r++}t.getUniqueId=a},f0d7:function(e,t,n){},f490:function(e,t,n){"use strict";var r=n("6374").default,a=n("c973").default;n("c1c3"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("99af"),n("ac1f"),n("466d"),n("5319"),n("2b3d"),n("b64b"),n("d81d"),n("159b"),n("25f0"),Object.defineProperty(t,"__esModule",{value:!0}),t.setQueryParams=t.queryXmlDocument=t.sharedFetch=void 0;var s=n("8b0f"),i=n("96ff"),o=n("9307"),c=new Map;function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n="".concat(t,"#").concat(e);if(c.has(n))return c.get(n);var r=fetch(e,{method:t}).catch((function(e){return e})).then((function(e){return c.delete(n),e}));return c.set(n,r),r.then((function(e){if(e instanceof Error)throw e;return e}))}function l(e){return u(e).catch((function(){return fetch(e,{method:"HEAD",mode:"no-cors"}).catch((function(e){throw new i.EndpointError("Fetching the document failed either due to network errors or unreachable host, error is: ".concat(e.message),0,!1)})).then((function(){throw new i.EndpointError("The document could not be fetched due to CORS limitations",0,!0)}))})).then(function(){var e=a(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.ok){e.next=5;break}return e.next=3,t.text();case 3:throw n=e.sent,new i.EndpointError("Received an error with code ".concat(t.status,": ").concat(n),t.status,!1);case 5:return e.next=7,t.arrayBuffer();case 7:return r=e.sent,a=t.headers.get("Content-Type"),e.abrupt("return",(0,o.decodeString)(r,a));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return(0,s.parseXmlString)(e)}))}function p(e,t){var n=e.match(/(https?%3A%2F%2F[^/]+)$/);if(n){var a=n[1],s=p(decodeURIComponent(a),t);return e.replace(a,encodeURIComponent(s))}var i,o=new URL(e),c=Object.keys(t),u=c.map((function(e){return e.toLowerCase()})),l=[],d=r(o.searchParams.keys());try{for(d.s();!(i=d.n()).done;){var m=i.value;u.indexOf(m.toLowerCase())>-1&&l.push(m)}}catch(h){d.e(h)}finally{d.f()}return l.map((function(e){return o.searchParams.delete(e)})),c.forEach((function(e){return o.searchParams.set(e,!0===t[e]?"":t[e])})),o.toString()}t.sharedFetch=u,t.queryXmlDocument=l,t.setQueryParams=p},fb2c:function(e,t,n){"use strict";n("a99a")},fc04:function(e,t,n){},ffa5:function(e,t,n){}});
//# sourceMappingURL=app.2843f82f.js.map