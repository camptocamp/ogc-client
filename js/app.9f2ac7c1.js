(function(e){function t(t){for(var r,o,a=t[0],c=t[1],l=t[2],p=0,d=[];p<a.length;p++)o=a[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},s={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var a=this["webpackJsonp"]=this["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0125":function(e,t,n){"use strict";n("076c")},"076c":function(e,t,n){},"0abb":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateDescribeFeatureTypeUrl=t.generateGetFeatureUrl=void 0;var r=n("f490");function s(e,t,n,s,i,o,a,c,l,u){const p="2.0.0"===t?"TYPENAMES":"TYPENAME",d="2.0.0"===t?"COUNT":"MAXFEATURES",m={SERVICE:"WFS",REQUEST:"GetFeature",VERSION:t,[p]:n};if(void 0!==s&&(m.OUTPUTFORMAT=s),void 0!==o&&(m.PROPERTYNAME=o.join(",")),a?(m.RESULTTYPE="hits",m[d]="1"):void 0!==i&&(m[d]=i.toString(10)),c&&(m.SRSNAME=c),l){const e=l.join(",");m.BBOX=u?`${e},${u}`:e}return(0,r.setQueryParams)(e,m)}function i(e,t,n){const s="2.0.0"===t?"TYPENAMES":"TYPENAME";return(0,r.setQueryParams)(e,{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:t,[s]:n})}t.generateGetFeatureUrl=s,t.generateDescribeFeatureTypeUrl=i},"0d64":function(e,t,n){},"0e2d":function(e,t,n){},"38f7":function(e,t,n){"use strict";n("f40d")},"3b2a":function(e,t,n){"use strict";n("0d64")},4007:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionParameterTypes=void 0,t.CollectionParameterTypes=["string","number","integer","date","point","linestring","polygon","geometry"]},"413d":function(e,t,n){"use strict";n("0e2d")},"540a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCollectionParameters=t.parseBaseCollectionInfo=t.checkHasFeatures=t.checkHasRecords=t.checkStyleConformance=t.checkTileConformance=t.parseCollections=t.parseConformance=t.parseEndpointInfo=void 0;var r=n("4007"),s=n("db8d"),i=n("96ff");function o(e){try{(0,s.assertHasLinks)(e,["data","http://www.opengis.net/def/rel/ogc/1.0/data"]),(0,s.assertHasLinks)(e,["conformance","http://www.opengis.net/def/rel/ogc/1.0/conformance"])}catch(t){throw new i.EndpointError("The endpoint appears non-conforming, the following error was encountered:\n"+t.message)}return{title:e.title,description:e.description,attribution:e.attribution}}function a(e){return e.conformsTo}function c(e=null){return t=>t.collections.filter(t=>null===e||t.itemType===e).map(e=>e.id)}function l(e){return e.indexOf("http://www.opengis.net/spec/ogcapi-tiles-1/1.0/conf/core")>-1}function u(e){return e.indexOf("http://www.opengis.net/spec/ogcapi-styles-1/0.0/conf/core")>-1}function p([e,t]){const n=["http://www.opengis.net/spec/ogcapi-records-1/1.0/conf/record-core","http://www.opengis.net/spec/ogcapi-records-1/1.0/conf/record-collection","http://www.opengis.net/spec/ogcapi-records-1/1.0/conf/record-api"];return(n.every(e=>t.indexOf(e)>-1)||t.indexOf("http://www.opengis.net/spec/ogcapi-records-1/1.0/conf/core")>-1)&&e.some(e=>"record"===e.itemType)}function d([e,t]){return t.indexOf("http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/core")>-1&&e.some(e=>"feature"===e.itemType)}function m(e){const{links:t,...n}=e;return n}function h(e){return"properties"in e&&"object"===typeof e.properties?Object.keys(e.properties).map(t=>{const n=e.properties[t];let s="string";if("string"===typeof n.$ref){const e=n.$ref.toLowerCase();e.indexOf("point")>-1?s="point":e.indexOf("linestring")>-1?s="linestring":e.indexOf("polygon")>-1?s="polygon":e.indexOf("geometry")>-1&&(s="geometry")}else"string"===typeof n.type&&r.CollectionParameterTypes.indexOf(n.type.toLowerCase())>-1&&(s=n.type.toLowerCase());return{name:t,type:s,..."string"===typeof n.title&&{title:n.title}}}):Array.isArray(e)?e.map(e=>({name:e,type:"string"})):[]}t.parseEndpointInfo=o,t.parseConformance=a,t.parseCollections=c,t.checkTileConformance=l,t.checkStyleConformance=u,t.checkHasRecords=p,t.checkHasFeatures=d,t.parseBaseCollectionInfo=m,t.parseCollectionParameters=h},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"col-8 offset-2"},[t("h1",{staticClass:"title text-center",staticStyle:{"font-size":"5em",margin:"130px 0 70px"}},[t("LibLogo")],1),t("div",{staticClass:"d-flex flex-row justify-content-center",staticStyle:{"margin-bottom":"70px"}},[t("button",{staticClass:"btn btn-primary tab-toggle m-3",class:{"tab-toggle-enabled":!e.demoTabEnabled},attrs:{type:"button"},on:{click:function(t){e.demoTabEnabled=!1}}},[e._v(" DOCS ")]),t("button",{staticClass:"btn btn-primary tab-toggle m-3",class:{"tab-toggle-enabled":e.demoTabEnabled},attrs:{type:"button"},on:{click:function(t){e.demoTabEnabled=!0}}},[e._v(" TRY IT! ")])]),e.demoTabEnabled?e._e():t("Docs"),e.demoTabEnabled?t("Demo"):e._e()],1)])},i=[],o=(n("fc04"),function(){var e=this;e._self._c;return e._m(0)}),a=[function(){var e=this,t=e._self._c;return t("div",[t("span",[e._v("ogc-client")])])}],c={name:"LibLogo"},l=c,u=(n("0125"),n("2877")),p=Object(u["a"])(l,o,a,!1,null,"7bc12546",null),d=p.exports,m=function(){var e=this,t=e._self._c;return t("div",[t("h2",{staticClass:"mb-4"},[e._v("Presentation")]),t("p",[t("LibName"),e._v(" is a pure Javascript library made for interacting with geospatial web services relying on standard protocols, namely "),t("a",{attrs:{href:"https://www.ogc.org/docs/is"}},[e._v("OGC standards.")])],1),t("p",[e._v(" Its purpose is to helps you interact with them in a user-friendly and consistent way. ")]),t("p",[e._v("Its main features include:")]),e._m(0),t("h2",{staticClass:"mt-5 mb-4"},[e._v("Usage")]),t("p",[e._v("First, install "),t("LibName"),e._v(" in your project:")],1),t("p",[t("CodeBlock",{attrs:{lang:"sh"}},[e._v("$ npm install --save @camptocamp/ogc-client")])],1),t("p",[e._v("Then, use it like so:")]),t("p",[t("CodeBlock",{attrs:{lang:"js"}},[t("pre",[e._v("import { WfsEndpoint } from '@camptocamp/ogc-client';\n\nnew WfsEndpoint('https://my.server.org/ows')\n  .then(endpoint => endpoint.supportsJson());")])])],1),t("p",[e._v(" Please refer to the API section for more details on how to use each functionality. ")]),t("div",{staticClass:"card text-bg-light mb-3"},[t("div",{staticClass:"card-header"},[e._v("A note on text encoding")]),t("div",{staticClass:"card-body"},[e._m(1),t("p",{staticClass:"card-text"},[t("LibName"),e._v(" will attempt to decode the responses using the information at its disposal, and in most case decoding should succeed. It may happen though that some unrecognized characters will remain; please "),t("a",{attrs:{href:"https://github.com/camptocamp/ogc-client/issues/new"}},[e._v("open an issue")]),e._v(" if that is the case! ")],1)])]),t("h2",{staticClass:"mt-5 mb-4"},[e._v("Why use it?")]),t("p",[e._v(" Many libraries are able to leverage OGC protocols for various specialized tasks, for instance downloading data or rendering maps. Often times though, the application code has the responsibility to specify the version to use, the coordinate system, the bounding box to query, etc. ")]),t("p",[t("LibName"),e._v(" intends to assist applications in discovering OGC services and what they offer, without having to manually write code for parsing GetCapabilities documents for example. ")],1),t("p",[e._v(" When an network error is encountered, "),t("LibName"),e._v(" will do an additional check to determine whether this is due to "),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"}},[e._v("CORS")]),e._v(" limitations. This will help the application code in giving an appropriate feedback to the user, i.e. that the targeted resource is indeed reachable but does not allow cross-origin usage. ")],1),t("p",[t("LibName"),e._v(" also keeps a cache of all operations using the "),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Cache"}},[e._v("Cache API")]),e._v(", thus offering almost limitless storage while also purging expired cache entries regularly. By default, all cache entries are kept for one hour. ")],1),t("p",[e._v("What "),t("LibName"),e._v(" currently does not do:")],1),e._m(2),t("h2",{staticClass:"mt-5 mb-4"},[e._v("Examples")]),t("h5",[e._v("Read a WMS layer extent")]),t("p",[t("CodeBlock",{attrs:{lang:"js"}},[t("pre",[e._v("import { WmsEndpoint } from '@camptocamp/ogc-client';\n\nasync function readExtent() {\n  const endpoint = await new WmsEndpoint('https://my.server.org/ows').isReady();\n  const layer = endpoint.getLayerByName();\n  const extent = layer.boundingBoxes['EPSG:4326'];\n}")])])],1),t("h5",[e._v("Compute a WFS GetFeature url")]),t("p",[t("CodeBlock",{attrs:{lang:"js"}},[t("pre",[e._v("import { WfsEndpoint } from '@camptocamp/ogc-client';\n\nasync function getFeatureUrl() {\n  const endpoint = await new WfsEndpoint('https://my.server.org/ows').isReady();\n  const url = endpoint.getFeatureUrl('my:featureType', {\n    asJson: true,\n    maxFeature: 1000\n  });\n}")])])],1),t("h5",[e._v("Query the first 10 items of an OGC API Records collection")]),t("p",[t("CodeBlock",{attrs:{lang:"js"}},[t("pre",[e._v("import { OgcApiEndpoint } from '@camptocamp/ogc-client';\n\nasync function getFirstTenRecords() {\n  const endpoint = await new OgcApiEndpoint('https://my.server.org/main')\n  const firstCollection = (await endpoint.recordCollections)[0];\n  return endpoint.getCollectionItems(firstCollection, 10, 0);\n}")])])],1),t("h2",{staticClass:"mt-5 mb-4"},[e._v("API")]),t("ApiDescription")],1)},h=[function(){var e=this,t=e._self._c;return t("ul",[t("li",[e._v(" Support for "),t("a",{attrs:{href:"https://www.ogc.org/standards/wfs"}},[e._v("WFS")]),e._v(" and "),t("a",{attrs:{href:"https://www.ogc.org/standards/wms"}},[e._v("WMS")]),e._v(" protocols ")]),t("li",[e._v("Elaborate cache system to minimize network requests")]),t("li",[e._v(" Fast parsing of XML documents using "),t("a",{attrs:{href:"https://github.com/rgrove/parse-xml"}},[e._v("@rgrove/parse-xml")])]),t("li",[e._v(" Detection of "),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"}},[e._v("CORS")]),e._v("-related issues ")])])},function(){var e=this,t=e._self._c;return t("p",{staticClass:"card-text"},[e._v(" Even though "),t("strong",[e._v("UTF-8")]),e._v(" is the most common text encoding in the web, some services might respond with other encodings such as "),t("strong",[e._v("UTF-16")]),e._v(", "),t("strong",[t("a",{attrs:{href:"https://en.wikipedia.org/wiki/ISO/IEC_8859-1"}},[e._v("ISO-8859-1")])]),e._v(", etc. ")])},function(){var e=this,t=e._self._c;return t("ul",[t("li",[e._v(" No "),t("a",{attrs:{href:"https://www.ogc.org/standards/wmts"}},[e._v("WMTS")]),e._v(" parsing: alternatives already exist, such as the OpenLayers "),t("a",{attrs:{href:"https://openlayers.org/en/latest/apidoc/module-ol_format_WMTSCapabilities-WMTSCapabilities.html"}},[e._v("WMTS Capabilities")]),e._v(" class ("),t("a",{attrs:{href:"https://openlayers.org/en/latest/examples/wmts-capabilities.html"}},[e._v("example")]),e._v(") ")]),t("li",[e._v(" No GML geometry parsing: again, "),t("a",{attrs:{href:"https://openlayers.org/en/latest/apidoc/module-ol_format_GML32-GML32.html"}},[e._v("alternatives do exist")])])])}],f=function(){var e=this,t=e._self._c;return t("pre",[t("code",{class:e.lang+" border-0 rounded-2 p-3"},[e._t("default")],2)])},y=[],g={name:"CodeBlock",props:["lang"]},b=g,v=Object(u["a"])(b,f,y,!1,null,"e4c545f6",null),C=v.exports,_=function(){var e=this,t=e._self._c;return t("div",[e._l(e.API.exports,(function(n){return["Class"===n.type?t("ClassCard",{attrs:{"api-element":n}}):e._e(),"Function"===n.type?t("FunctionCard",{attrs:{"api-element":n}}):e._e()]}))],2)},w=[];const E={exports:[{name:"WfsEndpoint",type:"Class",constructor:{params:[{name:"url",type:"string"}],description:"Creates a new WFS endpoint; wait for the `isReady()` promise before using the endpoint methods."},methods:[{name:"isReady",description:"Resolves when the endpoint is ready to use. Returns the same endpoint object for convenience.",params:[],return:{type:"Promise",subType:"WfsEndpoint"}},{name:"getServiceInfo",description:"Returns the service info.",params:[],return:{type:"GenericEndpointInfo"}},{name:"getVersion",description:"Returns the highest protocol version that this WFS endpoint supports.\nNote that if the url used for initialization does specify a version (e.g. `1.0.0`,\nthis version will most likely be used instead of the highest supported one.",params:[],return:{type:"string",values:["1.0.0","1.1.0","2.0.0"]}},{name:"getFeatureTypes",description:"Returns the available feature types.",params:[],return:{type:"Array",subType:"WfsFeatureTypeBrief"}},{name:"getFeatureTypeSummary",description:"Returns the feature type in summary format. If a namespace is specified in the name,\nthis will be used for matching; otherwise, matching will be done without taking namespaces into account.",params:[{name:"featureType",type:"string"}],return:{type:"WfsFeatureTypeSummary"}},{name:"getFeatureTypeFull",description:"Returns a promise that will resolve with the full feature type description,\nincluding properties with their types, geometry field and total object count.",params:[{name:"featureType",type:"string"}],return:{type:"Promise",subType:"WfsFeatureTypeFull"}},{name:"getFeatureTypePropDetails",description:"Returns a promise that will resolve with details on each of the feature type properties;\nfor now, this consists of a list of unique values in the whole dataset.",params:[{name:"featureType",type:"string"}],return:{type:"Promise",subType:"WfsFeatureTypePropDetails"}},{name:"supportsJson",description:"Returns true if the endpoint is able to output the specified feature type as GeoJSON.",params:[{name:"featureType",type:"string"}],return:{type:"boolean"}},{name:"getFeatureUrl",description:"Returns a URL that can be used to query features from this feature type.",params:[{name:"featureType",type:"string"},{name:"options",type:"GetFeatureUrlOptions"}],return:{type:"string"}}]},{name:"WmsEndpoint",type:"Class",constructor:{params:[{name:"url",type:"string"}],description:"Creates a new WMS endpoint; wait for the `isReady()` promise before using the endpoint methods."},methods:[{name:"isReady",description:"Resolves when the endpoint is ready to use. Returns the same endpoint object for convenience.",params:[],return:{type:"Promise",subType:"WmsEndpoint"}},{name:"getServiceInfo",description:"Returns the service info.",params:[],return:{type:"GenericEndpointInfo"}},{name:"getVersion",description:"Returns the highest protocol version that this WMS endpoint supports.\nNote that if the url used for initialization does specify a version (e.g. `1.1.0`,\nthis version will most likely be used instead of the highest supported one.",params:[],return:{type:"string",values:["1.1.0","1.1.1","1.3.0"]}},{name:"getLayers",description:"Returns the layers advertised in the endpoint. Note that WMS layers are organized\nin a tree structure, so some layers may have children layers as well",params:[],return:{type:"Array",subType:"WmsLayerSummary"}},{name:"getLayerByName",description:"Returns the full layer information, including supported coordinate systems,\navailable layers, bounding boxes etc. Layer name is case sensitive.",params:[{name:"layerName",type:"string"}],return:{type:"WmsLayerFull"}}]},{name:"OgcApiEndpoint",type:"Class",constructor:{params:[{name:"url",type:"string"}],description:"Creates a new OGC API endpoint."},properties:[{name:"info",description:"A Promise which resolves to the endpoint info.",type:"Promise",subType:"OgcApiEndpointInfo"},{name:"conformanceClasses",description:"A Promise which resolves to an array of conformance classes.",type:"Promise",subType:{type:"Array",subType:"string"}},{name:"allCollections",description:"A Promise which resolves to an array of all collection identifiers as strings.",type:"Promise",subType:{type:"Array",subType:"string"}},{name:"recordCollections",description:"A Promise which resolves to an array of records collection identifiers as strings.",type:"Promise",subType:{type:"Array",subType:"string"}},{name:"featureCollections",description:"A Promise which resolves to an array of feature collection identifiers as strings.",type:"Promise",subType:{type:"Array",subType:"string"}},{name:"hasTiles",description:"A Promise which resolves to a boolean indicating whether the endpoint offer tiles.",type:"Promise",subType:"boolean"},{name:"hasStyles",description:"A Promise which resolves to a boolean indicating whether the endpoint offer styles.",type:"Promise",subType:"boolean"},{name:"hasFeatures",description:"A Promise which resolves to a boolean indicating whether the endpoint offer feature collections.",type:"Promise",subType:"boolean"},{name:"hasRecords",description:"A Promise which resolves to a boolean indicating whether the endpoint offer record collections.",type:"Promise",subType:"boolean"}],methods:[{name:"getCollectionInfo",description:"Returns a promise resolving to a document describing the specified collection.",params:[{name:"collectionId",type:"string"}],return:{type:"Promise",subType:"OgcApiCollectionInfo"}},{name:"getCollectionItems",description:"Returns a promise resolving to an array of items from a collection with the given query parameters.",params:[{name:"collectionId",type:"string"},{name:"limit",type:"number",default:10},{name:"offset",type:"number",default:0},{name:"skipGeometry",type:"boolean",optional:!0},{name:"sortby",type:"Array",subType:"string",optional:!0},{name:"bbox",type:"[number, number, number, number]",optional:!0},{name:"properties",type:"Array",subType:"string",optional:!0}],return:{type:"Promise",subType:{type:"Array",subType:"OgcApiCollectionItem"}}},{name:"getCollectionItem",description:"Returns a promise resolving to a specific item from a collection.",params:[{name:"collectionId",type:"string"},{name:"itemId",type:"string"}],return:{type:"Promise",subType:"OgcApiCollectionItem"}}]},{name:"useCache",type:"Function",description:"Will run the provided function and resolve to its return value.\nThe function return value will also be stored in cache, meaning that subsequent runs will **not** execute the function but\nsimply return the cached value. `keys` are an indeterminate amount of string tokens that are used to uniquely identify the operation.\n\nCached values are kept for one hour. Each call to `useCache` will first loop on the currently cached values and\nclear the ones that have expired to make sure that the cache storage does not grow indefinitely.\n\nAlso note that if `useCache` is called several times with the same key without the first one having returned yet, all subsequent calls\nwill **not** trigger additional operations but simply resolve at the same time as the first one.\n\nCache is kept using the [Cache API](https://developer.mozilla.org/en-US/docs/Web/API/Cache), which has virtually no size limit.\nCache entries might be removed by the browser without notice. The identifying key for the cache entries is `ogc-client`.",params:[{name:"process",type:"AsyncFunction",params:[],subType:"any"},{name:"...keys",type:"Array",subType:"string"}],return:{type:"Promise",subType:"any"}},{name:"sharedFetch",type:"Function",description:"Returns a promise equivalent to `fetch(url)` but guarded against identical concurrent requests.\nRequests are considered identical if they share the _exact_ same url and method.",params:[{name:"url",type:"string"},{name:"method",type:"'GET' | 'HEAD'"}],return:{type:"Promise",subType:"Response"}}],types:[{name:"GenericEndpointInfo",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title"},{type:"string",name:"abstract"},{type:"string",name:"fees"},{type:"string",name:"constraints"},{type:"Array",subType:"string",name:"keywords"},{type:"Array",subType:"string",name:"outputFormats",optional:!0}]},{name:"WfsFeatureTypeBrief",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title",optional:!0},{type:"string",name:"abstract",optional:!0},{type:"BoundingBox",name:"boundingBox",optional:!0}]},{name:"WfsFeatureTypeSummary",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title",optional:!0},{type:"string",name:"abstract",optional:!0},{type:"BoundingBox",name:"boundingBox",optional:!0},{type:"CrsCode",name:"defaultCrs"},{type:"Array",subtype:"CrsCode",name:"otherCrs"},{type:"Array",subtype:"string",name:"outputFormats"}]},{name:"WfsFeatureTypeFull",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title",optional:!0},{type:"string",name:"abstract",optional:!0},{type:"BoundingBox",name:"boundingBox",optional:!0},{type:"CrsCode",name:"defaultCrs"},{type:"Array",subtype:"CrsCode",name:"otherCrs"},{type:"Array",subtype:"string",name:"outputFormats"},{type:"Map",subType:"FeaturePropertyType",name:"properties",description:"These properties will _not_ include the feature geometry"},{type:"string",name:"geometryName",description:"Not defined if no geometry present",optional:!0},{type:"FeatureGeometryType",name:"geometryType",description:"Not defined if no geometry present",optional:!0},{type:"number",name:"objectCount",description:"Not defined if object count could not be determined",optional:!0}]},{name:"WfsFeatureTypePropDetails",type:"Object",properties:[{name:"uniqueValues",type:"Array",subType:"WfsFeatureTypeUniqueValue"}]},{name:"WfsFeatureTypeUniqueValue",type:"Object",properties:[{type:"number",name:"count",description:"Number of occurrences of this value in the dataset"},{type:"Union",subTypes:["number","boolean","string"],name:"value"}]},{name:"GetFeatureUrlOptions",type:"Object",properties:[{type:"number",name:"maxFeatures",description:"All objects will be returned if undefined"},{type:"boolean",name:"asJson",description:"If `true`, will ask for GeoJSON; will throw if the service does not support it"},{type:"MimeType",name:"outputFormat",description:"A supported output format (overridden by `asJson`)"},{type:"CrsCode",name:"outputCrs",description:"If unspecified, this will be the data native projection"},{type:"BoundingBox",name:"extent",description:"An extent to restrict returned objects"},{type:"CrsCode",name:"extentCrs",description:"If unspecified, `extent` should be in the data native projection"}]},{name:"WmsLayerSummary",type:"Object",properties:[{type:"string",name:"name",description:"The layer is renderable if defined",optional:!0},{type:"string",name:"title"},{type:"string",name:"abstract"},{type:"Array",subType:"WmsLayerFull",name:"children",description:"Not defined if the layer is a leaf in the tree",optional:!0}]},{name:"WmsLayerFull",type:"Object",properties:[{type:"string",name:"name",description:"The layer is renderable if defined",optional:!0},{type:"string",name:"title"},{type:"string",name:"abstract",optional:!0},{type:"Array",subType:"CrsCode",name:"availableCrs"},{type:"Array",subType:"WmsLayerStyle",name:"styles"},{type:"Map",key:"string",subType:"BoundingBox",name:"boundingBoxes",description:"Dictionary of bounding boxes for each of the available CRS"},{type:"WmsLayerAttribution",name:"attribution",optional:!0},{type:"Array",subType:"WmsLayerFull",name:"children",description:"Not defined if the layer is a leaf in the tree",optional:!0}]},{name:"WmsLayerAttribution",type:"Object",properties:[{type:"string",name:"title",optional:!0},{type:"string",name:"url",optional:!0},{type:"string",name:"logoUrl",optional:!0}]},{name:"WmsLayerStyle",type:"Object",properties:[{type:"string",name:"name"},{type:"string",name:"title"},{type:"string",name:"legendUrl",description:"May not be defined; a GetLegendGraphic operation should work in any case",optional:!0}]},{name:"BoundingBox",type:"Array",subTypes:["number","number","number","number"],description:"Values are `minX`, `minY`, `maxX` and `maxY` expressed in latitudes and longitudes"},{name:"OgcApiEndpointInfo",type:"Object",subTypes:["number","number","number","number"],description:"Information related to an OGC API endpoint."},{name:"OgcApiCollectionInfo",type:"Object",subTypes:["number","number","number","number"],description:"Information on a specific collection of an OGC API endpoint."},{name:"OgcApiCollectionItem",type:"Object",subTypes:["number","number","number","number"],description:"An item coming from an OGC API endpoint"}]};var T=E,S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card mb-4"},[t("div",{staticClass:"card-header text-uppercase small border-bottom-0 py-1 px-3"},[e._v(" class ")]),t("div",{staticClass:"card-body pb-0"},[t("h5",{staticClass:"mb-3"},[t("code",{domProps:{innerHTML:e._s(e.className)}})]),t("CodeBlock",{staticClass:"mb-3",attrs:{lang:"js"}},[t("pre",[e._v("import { "+e._s(e.apiElement.name)+" } from '@camptocamp/ogc-client';")])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-3 text-uppercase text-secondary fw-bold pt-1",staticStyle:{"font-size":"0.8em"}},[e._v(" ðŸ“¦ constructor ")]),t("div",{staticClass:"col"},[t("code",{staticClass:"mb-2",domProps:{innerHTML:e._s(e.constructorSignature)}}),e.apiElement.constructor.description?t("MarkdownBlock",{staticClass:"mb-2 small",attrs:{text:e.apiElement.constructor.description}}):e._e()],1)]),e._l(e.apiElement.properties,(function(n){return t("div",{staticClass:"row"},[t("div",{staticClass:"col-3 text-uppercase text-secondary fw-bold pt-1",staticStyle:{"font-size":"0.8em"}},[e._v(" ðŸ’¡ property ")]),t("div",{staticClass:"col"},[t("code",{staticClass:"mb-2",domProps:{innerHTML:e._s(e.formatProperty(n))}}),n.description?t("MarkdownBlock",{staticClass:"mb-2 small",attrs:{text:n.description}}):e._e()],1)])})),e._l(e.apiElement.methods,(function(n){return t("div",{staticClass:"row"},[t("div",{staticClass:"col-3 text-uppercase text-secondary fw-bold pt-1",staticStyle:{"font-size":"0.8em"}},[e._v(" âš¡ method ")]),t("div",{staticClass:"col"},[t("code",{staticClass:"mb-2",domProps:{innerHTML:e._s(e.formatMethod(n))}}),t("div",{staticClass:"row pb-2"},[t("div",{staticClass:"col-3 text-uppercase text-secondary fw-bold pt-1",staticStyle:{"font-size":"0.8em"}},[e._v(" ðŸŒ±ï¸ returns ")]),t("div",{staticClass:"col"},[t("code",{domProps:{innerHTML:e._s(e.formatMethodReturned(n))}})])]),n.description?t("MarkdownBlock",{staticClass:"mb-2 small",attrs:{text:n.description}}):e._e()],1)])})),t("MarkdownBlock",{staticClass:"mb-3 mt-2 small",attrs:{text:e.apiElement.description}})],2)])},P=[],x=function(){var e=this,t=e._self._c;return t("div",{domProps:{innerHTML:e._s(e.parsed)}})},O=[],I=n("7c5c"),F={name:"MarkdownBlock",props:{text:String},computed:{parsed(){return I["parse"](this.text)}}},j=F,L=Object(u["a"])(j,x,O,!1,null,"53a4bfa6",null),N=L.exports;function A(e){return e.name}function k(e){const t=e.params.map(e=>`${e.name}${e.optional?"?":""}: ${R(e)}`).join(", ");return`${e.name}(${t})`}function M(e){const t=e.constructor.params.map(e=>`${e.name}: ${R(e)}`).join(", ");return`new ${e.name}(${t})`}function R(e){if(!e)return"void";const t=e.subType?R(e.subType):"";switch(e.type||e){case"Array":return t+"[]";case"Response":return"[Response](https://developer.mozilla.org/en-US/docs/Web/API/Response)";case"Promise":return`[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;${t}&gt;`;case"AsyncFunction":return"async () => "+t;case"string":if(e.values)return e.values.map(e=>"'"+e).join(" | ")}return e.type||e}var W={name:"ClassCard",components:{MarkdownBlock:N,CodeBlock:C},props:{apiElement:Object},methods:{formatMethod(e){return I["parseInline"](k(e))},formatMethodReturned(e){return I["parseInline"](R(e.return))},formatProperty(e){return I["parseInline"](`${e.name}: ${R(e)}`)}},computed:{className(){return I["parseInline"](A(this.apiElement))},constructorSignature(){return I["parseInline"](M(this.apiElement))}}},X=W,U=(n("944f"),Object(u["a"])(X,S,P,!1,null,"b089fd36",null)),D=U.exports,G=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card mb-4"},[t("div",{staticClass:"card-header text-uppercase small border-bottom-0 py-1 px-3"},[e._v(" function ")]),t("div",{staticClass:"card-body pb-0"},[t("h5",{staticClass:"mb-3"},[t("code",{domProps:{innerHTML:e._s(e.signature)}})]),t("CodeBlock",{staticClass:"mb-3",attrs:{lang:"js"}},[t("pre",[e._v("import { "+e._s(e.apiElement.name)+" } from '@camptocamp/ogc-client';")])]),t("div",{staticClass:"row pb-2"},[t("div",{staticClass:"col-3 text-uppercase text-secondary fw-bold pt-1",staticStyle:{"font-size":"0.8em"}},[e._v(" ðŸŒ± returns ")]),t("div",{staticClass:"col"},[t("code",{domProps:{innerHTML:e._s(e.returned)}})])]),t("MarkdownBlock",{staticClass:"small mt-2",attrs:{text:e.apiElement.description}})],1)])},B=[],q={name:"FunctionCard",components:{MarkdownBlock:N,CodeBlock:C},props:{apiElement:Object},computed:{signature(){return I["parseInline"](k(this.apiElement))},returned(){return I["parseInline"](R(this.apiElement.return))}}},$=q,Y=(n("a2ba"),Object(u["a"])($,G,B,!1,null,"4232c682",null)),V=Y.exports,J={name:"ApiDescription",components:{FunctionCard:V,ClassCard:D},data:()=>({API:T})},H=J,z=Object(u["a"])(H,_,w,!1,null,"31bb864d",null),Q=z.exports,K=function(){var e=this;e._self._c;return e._m(0)},Z=[function(){var e=this,t=e._self._c;return t("div",[t("span",[e._v("ogc-client")])])}],ee={name:"LibName"},te=ee,ne=(n("c283"),Object(u["a"])(te,K,Z,!1,null,"40416280",null)),re=ne.exports,se={name:"Docs",components:{CodeBlock:C,ApiDescription:Q,LibName:re}},ie=se,oe=Object(u["a"])(ie,m,h,!1,null,"20750454",null),ae=oe.exports,ce=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pb-5"},[t("h2",{staticClass:"my-4"},[e._v("WMS")]),t("p",[e._v(" Enter a WMS service URL below to get some information and a list of layers from it. ")]),t("WmsEndpoint"),t("h2",{staticClass:"my-4"},[e._v("WFS")]),t("p",[e._v(" Enter a WFS service URL below to get some information and a list of feature types from it. ")]),t("WfsEndpoint"),t("h2",{staticClass:"my-4"},[e._v("OGC API")]),t("p",[e._v(" Enter an OGC API endpoint URL below to get some information and a list of collections from it. ")]),t("OgcApiEndpoint")],1)},le=[],ue=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"d-flex flex-row"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"form-control me-3",attrs:{placeholder:"Enter a WMS service URL here"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.createEndpoint()}}},[e._v(" Analyze ")])]),e.loading?t("div",[e._v("Loading...")]):e._e(),e.loaded?t("div",[t("InfoList",{attrs:{info:e.endpoint.getServiceInfo()}}),t("ItemsTree",{staticStyle:{"min-height":"200px"},attrs:{items:e.endpoint.getLayers()},scopedSlots:e._u([{key:"default",fn:function({item:n}){return[t("div",{attrs:{title:n.abstract}},[n.name?[t("a",{staticClass:"link-light",attrs:{href:""},on:{click:function(t){return e.handleLayerClick(n,t)}}},[e._v(e._s(n.title))])]:[t("span",[e._v(e._s(n.title))])]],2)]}}],null,!1,139247298)}),e.selectedLayer?t("WmsLayerInfo",{attrs:{layer:e.selectedLayer,"endpoint-url":e.url}}):e._e()],1):e._e(),e.error?t("div",[e._v("Error: "+e._s(e.error))]):e._e()])},pe=[],de=n("91c2"),me=n.n(de),he=function(){var e=this,t=e._self._c;return t("dl",{staticClass:"small"},[e._l(e.propList,(function(n){return[t("dt",[e._v(e._s(n.title))]),t("dd",[e._v(e._s(n.description))])]}))],2)},fe=[],ye={name:"InfoList",props:{info:Object},computed:{propList(){return Object.keys(this.info).map(e=>({title:`${e.substr(0,1).toUpperCase()}${e.substr(1)}`,description:""+this.info[e]}))}}},ge=ye,be=(n("413d"),Object(u["a"])(ge,he,fe,!1,null,"6c49f3f5",null)),ve=be.exports,Ce=function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-dark small text-white p-2 rounded-1"},e._l(e.items,(function(n){return t("div",[t("TreeItem",{attrs:{item:n},scopedSlots:e._u([{key:"default",fn:function({item:t}){return[e._t("default",null,{item:t})]}}],null,!0)})],1)})),0)},_e=[],we=function(){var e=this,t=e._self._c;return t("div",[e._t("default",(function(){return[e._v(" tree item ")]}),{item:e.item}),e.hasChildren?t("div",{staticStyle:{"margin-left":"1rem"}},e._l(e.children,(function(n){return t("div",[t("div",{staticClass:"spacer-s"}),t("TreeItem",{attrs:{item:n},scopedSlots:e._u([{key:"default",fn:function({item:t}){return[e._t("default",null,{item:t})]}}],null,!0)})],1)})),0):e._e()],2)},Ee=[],Te={name:"TreeItem",props:["item"],computed:{hasChildren(){return this.item instanceof Object&&"children"in this.item},children(){return this.item.children}}},Se=Te,Pe=Object(u["a"])(Se,we,Ee,!1,null,"f897989c",null),xe=Pe.exports,Oe={name:"ItemsTree",components:{TreeItem:xe},props:{items:Array},mounted(){}},Ie=Oe,Fe=Object(u["a"])(Ie,Ce,_e,!1,null,"2ef44cc0",null),je=Fe.exports,Le=function(){var e=this,t=e._self._c;return t("div",[t("p",[e._v(e._s(e.layer.title))]),t("InfoList",{attrs:{info:e.layerInfo}}),t("div",{staticClass:"d-flex flex-row justify-content-between"},[t("label",[e._v(" Selected style:Â  "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedStyle,expression:"selectedStyle"}],staticClass:"form-select d-inline-block w-auto",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedStyle=t.target.multiple?n:n[0]}}},e._l(e.layer.styles,(function(n){return t("option",{domProps:{value:n.name}},[e._v(" "+e._s(n.title)+" ")])})),0)]),t("label",[e._v(" Selected CRS:Â  "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedCrs,expression:"selectedCrs"}],staticClass:"form-select d-inline-block w-auto",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedCrs=t.target.multiple?n:n[0]}}},e._l(e.layer.availableCrs,(function(n){return t("option",[e._v(" "+e._s(n)+" ")])})),0)])]),t("img",{attrs:{src:e.fullMapSrc,alt:"layer preview"}})],1)},Ne=[],Ae=(n("5494"),{name:"WmsLayerInfo",components:{InfoList:ve},props:{layer:Object,endpointUrl:String},data:()=>({selectedStyle:"",selectedCrs:""}),watch:{layer:{immediate:!0,handler(e){this.selectedStyle=e.styles.length>0?e.styles[0].name:"",this.selectedCrs=e.availableCrs[0]}}},computed:{layerInfo(){return{name:this.layer.name,...this.layer.abstract&&{abstract:this.layer.abstract},...this.layer.attribution&&this.layer.attribution.title&&{attribution:this.layer.attribution.title}}},fullMapSrc(){if(!(this.selectedCrs in this.layer.boundingBoxes))return"";const e=this.layer.boundingBoxes[this.selectedCrs],t=(e[2]-e[0])/(e[3]-e[1]),n=500,r=Math.round(t>1?n:n*t),s=Math.round(r/t),i=new URL(this.endpointUrl);return i.searchParams.set("SERVICE","WMS"),i.searchParams.set("REQUEST","GetMap"),i.searchParams.set("LAYERS",this.layer.name),i.searchParams.set("STYLES",this.selectedStyle),i.searchParams.set("WIDTH",r.toString()),i.searchParams.set("HEIGHT",s.toString()),i.searchParams.set("FORMAT","image/png"),i.searchParams.set("CRS",this.selectedCrs),i.searchParams.set("BBOX",e.join(",")),i.toString()}}}),ke=Ae,Me=Object(u["a"])(ke,Le,Ne,!1,null,"469e236c",null),Re=Me.exports,We={name:"WmsEndpoint",components:{WmsLayerInfo:Re,ItemsTree:je,InfoList:ve},data:()=>({loading:!1,error:null,endpoint:null,url:"https://ahocevar.com/geoserver/wms",selectedLayer:null}),computed:{loaded(){return this.endpoint&&!1===this.loading&&null===this.error}},methods:{async createEndpoint(){this.error=null,this.loading=!0,this.endpoint=new me.a(this.url);try{await this.endpoint.isReady()}catch(e){this.error=e.message}this.loading=!1},handleLayerClick(e,t){this.selectedLayer=this.endpoint.getLayerByName(e.name),t.preventDefault()}}},Xe=We,Ue=Object(u["a"])(Xe,ue,pe,!1,null,"51c46d2b",null),De=Ue.exports,Ge=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"d-flex flex-row"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"form-control me-3",attrs:{placeholder:"Enter a WFS service URL here"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),t("div",{staticClass:"spacer-s"}),t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.createEndpoint()}}},[e._v(" Analyze ")])]),e.loading?t("div",[e._v("Loading...")]):e._e(),e.loaded?t("div",[t("InfoList",{attrs:{info:e.endpoint.getServiceInfo()}}),t("ItemsTree",{staticStyle:{"min-height":"200px"},attrs:{items:e.endpoint.getFeatureTypes()},scopedSlots:e._u([{key:"default",fn:function({item:n}){return[t("div",{attrs:{title:n.abstract}},[n.name?[t("a",{staticClass:"link-light",attrs:{href:""},on:{click:function(t){return e.handleItemClick(n,t)}}},[e._v(e._s(n.title))])]:[t("span",[e._v(e._s(n.title))])]],2)]}}],null,!1,951100628)}),e.selectedFeatureType?t("WfsFeatureTypeInfo",{attrs:{"feature-type":e.selectedFeatureType,endpoint:e.endpoint}}):e._e()],1):e._e(),e.error?t("div",[e._v("Error: "+e._s(e.error))]):e._e()])},Be=[],qe=n("b411"),$e=n.n(qe),Ye=function(){var e=this,t=e._self._c;return t("div",[t("p",[e._v(e._s(e.featureType.name))]),t("InfoList",{attrs:{info:e.featureTypeInfo}}),t("p",[e._v("Properties")]),t("InfoList",{attrs:{info:e.featureProperties}}),null!==e.featurePropsDetails||e.loadingValues?e._e():t("div",[t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.loadValues()}}},[e._v(" Load unique values ")])]),e.loadingValues?t("div",[e._v("Loading unique values...")]):e._e(),null!==e.featurePropsDetails?t("div",[t("p",[e._v("Unique values")]),t("InfoList",{attrs:{info:e.uniqueValues}})],1):e._e()],1)},Ve=[],Je=(n("13d5"),{name:"WfsFeatureTypeInfo",components:{InfoList:ve},props:{featureType:Object,endpoint:Object},data:()=>({loadingValues:!1,featurePropsDetails:null}),computed:{featureTypeInfo(){return{..."title"in this.featureType&&{title:this.featureType.title},..."abstract"in this.featureType&&{abstract:this.featureType.abstract},CRS:[this.featureType.defaultCrs,...this.featureType.otherCrs].join(", "),..."objectCount"in this.featureType&&{"object count":this.featureType.objectCount},..."geometryName"in this.featureType&&{"geometry name":this.featureType.geometryName},..."geometryType"in this.featureType&&{"geometry type":this.featureType.geometryType}}},featureProperties(){return{...this.featureType.properties}},uniqueValues(){return null===this.featurePropsDetails?{}:Object.keys(this.featurePropsDetails).reduce((e,t)=>({...e,[t]:this.featurePropsDetails[t].uniqueValues.sort((e,t)=>t.count-e.count).filter((e,t)=>t<=8).map((e,t)=>t<8?`${e.value} (${e.count})`:"...").join(", ")}),{})}},methods:{async loadValues(){this.loadingValues=!0,this.featurePropsDetails=await this.endpoint.getFeatureTypePropDetails(this.featureType.name),this.loadingValues=!1}},watch:{featureType(){this.loadingValues=!1,this.featurePropsDetails=null}}}),He=Je,ze=Object(u["a"])(He,Ye,Ve,!1,null,"338bfa2b",null),Qe=ze.exports,Ke={name:"WfsEndpoint",components:{WfsFeatureTypeInfo:Qe,ItemsTree:je,InfoList:ve},data:()=>({loading:!1,error:null,endpoint:null,url:"https://ahocevar.com/geoserver/wfs",selectedFeatureType:null}),computed:{loaded(){return this.endpoint&&!1===this.loading&&null===this.error}},methods:{async createEndpoint(){this.error=null,this.loading=!0,this.endpoint=new $e.a(this.url);try{await this.endpoint.isReady()}catch(e){this.error=e.message}this.loading=!1},async handleItemClick(e,t){t.preventDefault(),this.selectedFeatureType=await this.endpoint.getFeatureTypeFull(e.name)}}},Ze=Ke,et=Object(u["a"])(Ze,Ge,Be,!1,null,"b5c35d10",null),tt=et.exports,nt=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"d-flex flex-row"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"form-control me-3",attrs:{placeholder:"Enter an OGC API endpoint URL here"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),t("div",{staticClass:"spacer-s"}),t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.createEndpoint()}}},[e._v(" Analyze ")])]),e.endpointSummary?t("Async",{attrs:{promise:e.endpointSummary},scopedSlots:e._u([{key:"then",fn:function({result:n}){return[t("InfoList",{attrs:{info:n.info}}),t("ItemsTree",{staticStyle:{"min-height":"200px"},attrs:{items:n.collections},scopedSlots:e._u([{key:"default",fn:function({item:n}){return[t("span",[e._v(e._s(n))])]}}],null,!0)})]}}],null,!1,3629720005)}):e._e()],1)},rt=[],st=function(){var e=this,t=e._self._c;return e.pending?t("div",[e._t("pending",(function(){return[t("span",[e._v("Loading...")])]}))],2):e.rejected?t("div",[e._t("catch",(function(){return[t("span",{staticClass:"error"},[e._v("Error: "+e._s(e.rejected))])]}),{error:e.rejected})],2):t("div",[e._t("then",(function(){return[t("span",[e._v("Loaded: "+e._s(e.resolved))])]}),{result:e.resolved})],2)},it=[],ot={name:"Async",props:{promise:Promise},data:()=>({pending:!0,resolved:null,rejected:null}),watch:{promise:{immediate:!0,handler(e){e instanceof Promise?(this.pending=!0,e.then(e=>{this.resolved=e,this.rejected=null,this.pending=!1},e=>{this.rejected=e,this.resolved=null,this.pending=!1})):(this.resolved=e,this.rejected=null,this.pending=!1)}}}},at=ot,ct=(n("38f7"),Object(u["a"])(at,st,it,!1,null,"10f0121a",null)),lt=ct.exports,ut=n("5b5d"),pt=n.n(ut),dt={name:"OgcApiEndpoint",components:{Async:lt,ItemsTree:je,InfoList:ve},data:()=>({endpoint:null,endpointSummary:null,endpointCollections:null,url:"https://demo.ldproxy.net/zoomstack"}),computed:{loaded(){return this.endpoint&&!1===this.loading&&null===this.error}},methods:{createEndpoint(){this.endpoint=new pt.a(this.url),this.endpointSummary=Promise.all([this.endpoint.info,this.endpoint.hasTiles,this.endpoint.hasStyles,this.endpoint.hasRecords,this.endpoint.hasFeatures,this.endpoint.allCollections]).then(([e,t,n,r,s,i])=>({info:{...e,hasTiles:t,hasStyles:n,hasRecords:r,hasFeatures:s},collections:i}))}}},mt=dt,ht=Object(u["a"])(mt,nt,rt,!1,null,"6dfc2eca",null),ft=ht.exports,yt={name:"App",components:{OgcApiEndpoint:ft,WfsEndpoint:tt,WmsEndpoint:De}},gt=yt,bt=Object(u["a"])(gt,ce,le,!1,null,null,null),vt=bt.exports,Ct={name:"App",components:{Docs:ae,LibLogo:d,Demo:vt},data:()=>({demoTabEnabled:!1})},_t=Ct,wt=(n("3b2a"),Object(u["a"])(_t,s,i,!1,null,"2c5966d3",null)),Et=wt.exports;hljs.initHighlightingOnLoad(),r["a"].config.productionTip=!1,new r["a"]({render:e=>e(Et)}).$mount("#app")},"5b5d":function(e,t,n){"use strict";n("5494"),Object.defineProperty(t,"__esModule",{value:!0});var r=n("540a"),s=n("db8d"),i=n("96ff");class o{constructor(e){this.baseUrl=e,this.root=(0,s.fetchRoot)(this.baseUrl),this.conformance=this.root.then(e=>(0,s.fetchLink)(e,["conformance","http://www.opengis.net/def/rel/ogc/1.0/conformance"],this.baseUrl)).catch(()=>null),this.data=this.root.then(e=>(0,s.fetchLink)(e,["data","http://www.opengis.net/def/rel/ogc/1.0/data"],this.baseUrl)).catch(()=>null)}get info(){return this.root.then(r.parseEndpointInfo)}get conformanceClasses(){return this.conformance.then(r.parseConformance)}get allCollections(){return this.data.then((0,r.parseCollections)())}get recordCollections(){return Promise.all([this.data,this.hasRecords]).then(([e,t])=>t?e:{collections:[]}).then((0,r.parseCollections)("record"))}get featureCollections(){return Promise.all([this.data,this.hasFeatures]).then(([e,t])=>t?e:{collections:[]}).then((0,r.parseCollections)("feature"))}get hasTiles(){return this.conformanceClasses.then(r.checkTileConformance)}get hasStyles(){return this.conformanceClasses.then(r.checkStyleConformance)}get hasFeatures(){return Promise.all([this.data.then(e=>e.collections),this.conformanceClasses]).then(r.checkHasFeatures)}get hasRecords(){return Promise.all([this.data.then(e=>e.collections),this.conformanceClasses]).then(r.checkHasRecords)}getCollectionDocument(e){return Promise.all([this.allCollections,this.data]).then(([t,n])=>{if(-1===t.indexOf(e))throw new i.EndpointError("Collection not found: "+e);return n.collections.find(t=>t.id===e)}).then(e=>(0,s.fetchLink)(e,"self",this.baseUrl))}async getCollectionInfo(e){const t=await this.getCollectionDocument(e),n=(0,r.parseBaseCollectionInfo)(t),[i,o]=await Promise.all([(0,s.fetchLink)(t,["queryables","http://www.opengis.net/def/rel/ogc/1.0/queryables"],this.baseUrl).then(r.parseCollectionParameters).catch(()=>[]),(0,s.fetchLink)(t,["sortables","http://www.opengis.net/def/rel/ogc/1.0/sortables"],this.baseUrl).then(r.parseCollectionParameters).catch(()=>[])]);return{...n,queryables:i,sortables:o}}getCollectionItems(e,t=10,n=0,r=null,i=null,o=null,a=null){return this.getCollectionDocument(e).then(e=>{const c=new URL((0,s.getLinkUrl)(e,"items",this.baseUrl),window.location.toString());return c.searchParams.set("limit",t.toString()),c.searchParams.set("offset",n.toString()),null!==r&&c.searchParams.set("skipGeometry",r.toString()),null!==i&&c.searchParams.set("sortby",i.join(",").toString()),null!==o&&c.searchParams.set("bbox",o.join(",").toString()),null!==a&&c.searchParams.set("properties",a.join(",").toString()),c.toString()}).then(s.fetchDocument).then(e=>e.features)}getCollectionItem(e,t){return this.getCollectionDocument(e).then(e=>{const n=new URL((0,s.getLinkUrl)(e,"items",this.baseUrl),window.location.toString());return n.pathname+="/"+t,n.toString()}).then(s.fetchDocument)}}t.default=o},6369:function(e,t,n){"use strict";n("13d5"),Object.defineProperty(t,"__esModule",{value:!0}),t.parseFeatureTypeInfo=void 0;var r=n("8b0f");function s(e,t,n,s){const{name:a,title:c,abstract:l,defaultCrs:u,otherCrs:p,outputFormats:d,latLonBoundingBox:m}=e,h=s.startsWith("2.0")?"numberMatched":"numberOfFeatures",f=parseInt((0,r.getElementAttribute)((0,r.getRootElement)(n),h)),y=(0,r.findChildrenElement)((0,r.getRootElement)(t),"complexType",!0)[0],g=(0,r.findChildrenElement)(y,"element",!0),b=g.filter(e=>(0,r.getElementAttribute)(e,"type").startsWith("xsd:")).reduce((e,t)=>({...e,[(0,r.getElementAttribute)(t,"name")]:i((0,r.getElementAttribute)(t,"type"))}),{}),v=g.filter(e=>(0,r.getElementAttribute)(e,"type").startsWith("gml:"))[0],C=v?(0,r.getElementAttribute)(v,"name"):void 0,_=v?o((0,r.getElementAttribute)(v,"type")):void 0;return{name:a,...c&&{title:c},...l&&{abstract:l},...m&&{boundingBox:m},...u&&{defaultCrs:u},...p&&{otherCrs:p},...d&&{outputFormats:d},properties:b,...C&&{geometryName:C},..._&&{geometryType:_},...!Number.isNaN(f)&&{objectCount:f}}}function i(e){const t=e.indexOf(":")>-1?e.substr(e.indexOf(":")+1):e;switch(t){case"string":return"string";case"boolean":return"boolean";case"float":case"double":case"decimal":return"float";case"long":case"byte":case"integer":case"int":case"positiveInteger":case"negativeInteger":case"nonPositiveInteger":case"nonNegativeInteger":case"short":case"unsignedLong":case"unsignedInt":case"unsignedShort":case"unsignedByte":return"integer";default:return"string"}}function o(e){const t=e.indexOf(":")>-1?e.substr(e.indexOf(":")+1):e;switch(t){case"PointPropertyType":return"point";case"MultiPointPropertyType":return"multipoint";case"CurvePropertyType":case"LineStringPropertyType":return"linestring";case"MultiCurvePropertyType":case"MultiLineStringPropertyType":return"linestring";case"PolygonPropertyType":case"SurfacePropertyType":return"polygon";case"MultiPolygonPropertyType":case"MultiSurfacePropertyType":return"multipolygon";default:return"unknown"}}t.parseFeatureTypeInfo=s},"797f":function(e,t,n){},8566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.purgeEntries=t.useCache=t.readCacheEntry=t.hasValidCacheEntry=t.storeCacheEntry=t.getCacheExpiryDuration=t.setCacheExpiryDuration=void 0;let r=36e5;function s(e){r=e}function i(){return r}t.setCacheExpiryDuration=s,t.getCacheExpiryDuration=i;const o="caches"in globalThis?caches.open("ogc-client"):null;async function a(e,...t){if(!o)return;const n="https://cache/"+t.join("/"),r=await o;await r.put(n,new Response(JSON.stringify(e),{headers:{"x-expiry":(Date.now()+i()).toString(10)}}))}async function c(...e){if(!o)return!1;const t="https://cache/"+e.join("/"),n=await o;return n.match(t).then(e=>!!e&&parseInt(e.headers.get("x-expiry"))>Date.now())}async function l(...e){if(!o)return null;const t="https://cache/"+e.join("/"),n=await o,r=await n.match(t);return r?r.clone().json():null}t.storeCacheEntry=a,t.hasValidCacheEntry=c,t.readCacheEntry=l;const u=new Map;async function p(e,...t){if(await d(),await c(...t))return l(...t);const n=t.join("#");if(u.has(n))return u.get(n);const r=e();r instanceof Promise&&(r.then(()=>u.delete(n)),u.set(n,r));const s=await r;return await a(s,...t),s}async function d(){if(!o)return;const e=await o,t=await e.keys();for(let n of t){const t=await e.match(n);parseInt(t.headers.get("x-expiry"))<=Date.now()&&await e.delete(n)}}t.useCache=p,t.purgeEntries=d},"8b0f":function(e,t,n){"use strict";n("d9e2"),n("14d9"),n("13d5"),Object.defineProperty(t,"__esModule",{value:!0}),t.getElementAttribute=t.getElementText=t.getChildrenElement=t.findChildElement=t.findChildrenElement=t.getElementName=t.getRootElement=t.stripNamespace=t.parseXmlString=t.XmlParseError=void 0;var r=n("6b49");class s extends Error{constructor(e){super(e)}}function i(e){let t=null;try{t=(0,r.parseXml)(e)}catch(n){throw new s(n.message)}return t}function o(e){const t=e.indexOf(":");return t>-1?e.substr(t+1):e}function a(e){return e.children[0]}function c(e){return e.name||""}function l(e,t,n=!1){const r=o(t);function s(e,t){return o(c(t))===r&&e.push(t),n&&Array.isArray(t.children)?[...e,...t.children.reduce(s,[])]:e}return e&&Array.isArray(e.children)?e.children.reduce(s,[]):[]}function u(e,t,n=!1){return l(e,t,n)[0]||null}function p(e){return e&&Array.isArray(e.children)?[...e.children.filter(e=>e instanceof r.XmlElement)]:[]}function d(e){const t=e&&Array.isArray(e.children)?e.children.find(e=>"text"===e.type):null;return t?t.text:""}function m(e,t){return e&&e.attributes[t]||""}t.XmlParseError=s,t.parseXmlString=i,t.stripNamespace=o,t.getRootElement=a,t.getElementName=c,t.findChildrenElement=l,t.findChildElement=u,t.getChildrenElement=p,t.getElementText=d,t.getElementAttribute=m},"91c2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("f03e"),s=n("8566"),i=n("f490");class o{constructor(e){const t=(0,i.setQueryParams)(e,{SERVICE:"WMS",REQUEST:"GetCapabilities"});this._capabilitiesPromise=(0,s.useCache)(()=>(0,r.parseWmsCapabilities)(t),"WMS","CAPABILITIES",t).then(({info:e,layers:t,version:n})=>{this._info=e,this._layers=t,this._version=n})}isReady(){return this._capabilitiesPromise.then(()=>this)}getServiceInfo(){return this._info}getLayers(){function e(t){return{title:t.title,name:t.name,abstract:t.abstract,..."children"in t&&{children:t.children.map(e)}}}return this._layers.map(e)}getLayerByName(e){let t=null;function n(r){null===t&&(r.name!==e?"children"in r&&r.children.map(n):t=r)}return this._layers.map(n),t}getVersion(){return this._version}}t.default=o},9307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeString=void 0;const r=["utf-8","utf-16","iso-8859-1"],s="utf-8";function i(e){const t=/charset=([^;]+)/.exec(e);return t?t[1]:null}function o(e,t){const n=t?i(t):null,o=n?[n,...r]:r;for(const r of o)try{const t=new TextDecoder(r,{fatal:!0});return t.decode(e)}catch(a){}return console.warn(`XML document encoding could not be determined, falling back to ${s}.`),new TextDecoder(s).decode(e)}t.decodeString=o},"944f":function(e,t,n){"use strict";n("797f")},"96ff":function(e,t,n){"use strict";n("d9e2"),Object.defineProperty(t,"__esModule",{value:!0}),t.EndpointError=void 0;class r extends Error{constructor(e,t,n){super(e),this.message=e,this.httpStatus=t,this.isCrossOriginRelated=n}}t.EndpointError=r},a2ba:function(e,t,n){"use strict";n("ac8c")},ac8c:function(e,t,n){},b176:function(e,t,n){},b411:function(e,t,n){"use strict";n("d9e2"),Object.defineProperty(t,"__esModule",{value:!0});var r=n("f03e"),s=n("f490"),i=n("6369"),o=n("8566"),a=n("0abb"),c=n("8b0f");class l{constructor(e){this._capabilitiesUrl=(0,s.setQueryParams)(e,{SERVICE:"WFS",REQUEST:"GetCapabilities"}),this._capabilitiesPromise=(0,o.useCache)(()=>(0,r.parseWfsCapabilities)(this._capabilitiesUrl),"WFS","CAPABILITIES",this._capabilitiesUrl).then(({info:e,featureTypes:t,version:n})=>{this._info=e,this._featureTypes=t,this._version=n})}isReady(){return this._capabilitiesPromise.then(()=>this)}getServiceInfo(){return this._info}getFeatureTypes(){return this._featureTypes.map(e=>({name:e.name,..."title"in e&&{title:e.title},..."abstract"in e&&{abstract:e.abstract},..."latLonBoundingBox"in e&&{boundingBox:e.latLonBoundingBox}}))}_getFeatureTypeByName(e){if(!this._featureTypes)return null;const t=(0,c.stripNamespace)(e)!==e;return this._featureTypes.find(n=>t?n.name===e:(0,c.stripNamespace)(n.name)===e)||null}getFeatureTypeSummary(e){const t=this._getFeatureTypeByName(e);return t?{name:t.name,..."title"in t&&{title:t.title},..."abstract"in t&&{abstract:t.abstract},..."latLonBoundingBox"in t&&{boundingBox:t.latLonBoundingBox},defaultCrs:t.defaultCrs,otherCrs:t.otherCrs,outputFormats:t.outputFormats}:null}getFeatureTypeFull(e){const t=this._getFeatureTypeByName(e);return t?(0,o.useCache)(()=>{const n=(0,a.generateDescribeFeatureTypeUrl)(this._capabilitiesUrl,this._version,e),r=(0,a.generateGetFeatureUrl)(this._capabilitiesUrl,this._version,e,void 0,void 0,void 0,!0);return Promise.all([(0,s.queryXmlDocument)(n),(0,s.queryXmlDocument)(r)]).then(([e,n])=>(0,i.parseFeatureTypeInfo)(t,e,n,this._version))},"WFS","FEATURETYPEINFO",this._capabilitiesUrl,e):null}async getFeatureTypePropDetails(e){const t=await this.getFeatureTypeFull(e);return null===t?null:(0,o.useCache)(()=>(0,r.queryWfsFeatureTypeDetails)(this._capabilitiesUrl,this._version,t).then(e=>e.props),"WFS","FEATURETYPEPROPDETAILS",this._capabilitiesUrl,e)}getVersion(){return this._version}_getJsonCompatibleOutputFormat(e){const t=this._getFeatureTypeByName(e);if(!t)throw new Error("The following feature type was not found in the service: "+e);const n=t.outputFormats.filter(e=>e.toLowerCase().indexOf("json")>-1);return n.length?n[0]:null}supportsJson(e){return this._featureTypes?!!this._getJsonCompatibleOutputFormat(e):null}getFeatureUrl(e,t){if(!this._featureTypes)return null;const{maxFeatures:n,asJson:r,outputFormat:s,outputCrs:i,extent:o,extentCrs:c}=t||{},l=this._getFeatureTypeByName(e);if(!l)throw new Error("The following feature type was not found in the service: "+e);let u=s;if(r){if(u=this._getJsonCompatibleOutputFormat(e)||void 0,!u)throw new Error("The endpoint does not appear to support GeoJSON for the feature type "+l.name)}else s&&-1===l.outputFormats.indexOf(s)&&console.warn(`The following output format type was not found in the feature type ${l.name}: ${s}`);return(0,a.generateGetFeatureUrl)(this._capabilitiesUrl,this._version,l.name,u,n,void 0,void 0,i,o,c)}}t.default=l},c283:function(e,t,n){"use strict";n("b176")},db8d:function(e,t,n){"use strict";n("5494"),Object.defineProperty(t,"__esModule",{value:!0}),t.assertHasLinks=t.fetchLink=t.getLinkUrl=t.fetchRoot=t.fetchDocument=void 0;var r=n("96ff");function s(e){const t=new URL(e,window.location.toString());return t.searchParams.set("f","json"),fetch(t.toString(),{headers:{Accept:"application/json"}}).then(e=>e.json())}function i(e){return s(e)}function o(e,t,n){const r=e.links.filter(e=>Array.isArray(t)?t.indexOf(e.rel)>-1:e.rel===t);return r.length?new URL(r[0].href,n||window.location.toString()).toString():null}function a(e,t,n){const i=o(e,t,n);return i?s(i):Promise.reject(new r.EndpointError("Could not find link with type: "+t))}function c(e,t){const n=o(e,t);if(!n)throw new r.EndpointError("Could not find link with type: "+t)}t.fetchDocument=s,t.fetchRoot=i,t.getLinkUrl=o,t.fetchLink=a,t.assertHasLinks=c},dfcf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addTaskHandler=t.sendTaskRequest=void 0;var r=n("f0ac");function s(e,t,n){return new Promise((s,i)=>{const o=(0,r.getUniqueId)(),a={requestId:o,taskName:e,params:n};null===t?globalThis.dispatchEvent(new CustomEvent("ogc-client.request",{detail:a})):t.postMessage(a);const c=e=>{e.requestId===o&&(null===t?globalThis.removeEventListener("message",l):t.removeEventListener("message",u),"error"in e?i(e.error):s(e.response))},l=e=>c(e.detail),u=e=>c(e.data);null===t?globalThis.addEventListener("ogc-client.response",l):t.addEventListener("message",u)})}function i(e,t,n){const r="undefined"!==typeof WorkerGlobalScope,s=async s=>{if(s.taskName===e){let o,a;try{o=await n(s.params)}catch(i){a=i}const c={taskName:e,requestId:s.requestId,...o&&{response:o},...a&&{error:a}};r?t.postMessage(c):t.dispatchEvent(new CustomEvent("ogc-client.response",{detail:c}))}};r?t.addEventListener("message",e=>s(e.data)):t.addEventListener("ogc-client.request",e=>s(e.detail))}t.sendTaskRequest=s,t.addTaskHandler=i},f03e:function(e,t,n){"use strict";n("5494"),Object.defineProperty(t,"__esModule",{value:!0}),t.queryWfsFeatureTypeDetails=t.parseWfsCapabilities=t.parseWmsCapabilities=t.enableFallbackWithoutWorker=void 0;var r=n("dfcf");let s,i=!1;function o(){i=!0}function a(){return i?null:(s||(s=new Worker(URL.createObjectURL(new Blob(['function e(e,t,n){const r="undefined"!=typeof WorkerGlobalScope,s=async s=>{if(s.taskName===e){let i,o;try{i=await n(s.params)}catch(e){o=e}const a=Object.assign(Object.assign({taskName:e,requestId:s.requestId},i&&{response:i}),o&&{error:o});r?t.postMessage(a):t.dispatchEvent(new CustomEvent("ogc-client.response",{detail:a}))}};r?t.addEventListener("message",(e=>s(e.data))):t.addEventListener("ogc-client.request",(e=>s(e.detail)))}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={},r={},s={};Object.defineProperty(s,"__esModule",{value:!0}),s.StringScanner=void 0;const i="",o=/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;s.StringScanner=class{constructor(e){if(this.charCount=this.charLength(e,!0),this.charIndex=0,this.length=e.length,this.multiByteMode=this.charCount!==this.length,this.string=e,this.multiByteMode){let t=[];for(let n=0,r=0;r<this.charCount;++r)t[r]=n,n+=e.codePointAt(n)>65535?2:1;this.charsToBytes=t}}get isEnd(){return this.charIndex>=this.charCount}charLength(e,t=this.multiByteMode){return t?e.replace(o,"_").length:e.length}advance(e=1){this.charIndex=Math.min(this.charCount,this.charIndex+e)}charIndexToByteIndex(e=this.charIndex){return this.multiByteMode?this.charsToBytes[e]??1/0:e}consume(e=1){let t=this.peek(e);return this.advance(e),t}consumeMatch(e){if(!e.sticky)throw new Error(\'`regex` must have a sticky flag ("y")\');e.lastIndex=this.charIndexToByteIndex();let t=e.exec(this.string);if(null===t||0===t.length)return i;let n=t[0];return this.advance(this.charLength(n)),n}consumeMatchFn(e){let t,n=i;for(;(t=this.peek())&&e(t);)n+=t,this.advance();return n}consumeString(e){if(this.consumeStringFast(e))return e;if(this.multiByteMode){let{length:t}=e,n=this.charLength(e);if(n!==t&&e===this.peek(n))return this.advance(n),e}return i}consumeStringFast(e){let{length:t}=e;return this.peek(t)===e?(this.advance(t),e):i}consumeUntilMatch(e){let t=this.string.slice(this.charIndexToByteIndex()),n=t.search(e);if(n<=0)return i;let r=t.slice(0,n);return this.advance(this.charLength(r)),r}consumeUntilString(e){let{string:t}=this,n=this.charIndexToByteIndex(),r=t.indexOf(e,n);if(r<=0)return i;let s=t.slice(n,r);return this.advance(this.charLength(s)),s}peek(e=1){let{charIndex:t,multiByteMode:n,string:r}=this;return n?t>=this.charCount?i:r.slice(this.charIndexToByteIndex(t),this.charIndexToByteIndex(t+e)):r.slice(t,t+e)}reset(e=0){this.charIndex=e>=0?Math.min(this.charCount,e):Math.max(0,this.charIndex+e)}};var a={};function c(e){let t=l(e);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||45===t||46===t||183===t||t>=768&&t<=879||t>=8255&&t<=8256||u(e,t)}function u(e,t=l(e)){return t>=97&&t<=122||t>=65&&t<=90||58===t||95===t||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=767||t>=880&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function l(e){return e.codePointAt(0)||-1}Object.defineProperty(a,"__esModule",{value:!0}),a.isXmlCodePoint=a.isWhitespace=a.isReferenceChar=a.isNameStartChar=a.isNameChar=a.predefinedEntities=a.endCharData=a.attValueNormalizedWhitespace=a.attValueCharSingleQuote=a.attValueCharDoubleQuote=void 0,a.attValueCharDoubleQuote=/[^"&<]+/y,a.attValueCharSingleQuote=/[^\'&<]+/y,a.attValueNormalizedWhitespace=/\\r\\n|[\\n\\r\\t]/g,a.endCharData=/<|&|]]>/,a.predefinedEntities=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"\'",gt:">",lt:"<",quot:\'"\'})),a.isNameChar=c,a.isNameStartChar=u,a.isReferenceChar=function(e){return"#"===e||c(e)},a.isWhitespace=function(e){let t=l(e);return 32===t||9===t||10===t||13===t},a.isXmlCodePoint=function(e){return 9===e||10===e||13===e||e>=32&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111};var h={},d={};Object.defineProperty(d,"__esModule",{value:!0}),d.XmlNode=void 0;class m{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){return this.parent?.document??null}get isRootNode(){return null!==this.parent&&this.parent===this.document&&this.type===m.TYPE_ELEMENT}get preserveWhitespace(){return!!this.parent?.preserveWhitespace}get type(){return""}toJSON(){let e={type:this.type};return this.isRootNode&&(e.isRootNode=!0),this.preserveWhitespace&&(e.preserveWhitespace=!0),-1!==this.start&&(e.start=this.start,e.end=this.end),e}}d.XmlNode=m,m.TYPE_CDATA="cdata",m.TYPE_COMMENT="comment",m.TYPE_DOCUMENT="document",m.TYPE_DOCUMENT_TYPE="doctype",m.TYPE_ELEMENT="element",m.TYPE_PROCESSING_INSTRUCTION="pi",m.TYPE_TEXT="text",m.TYPE_XML_DECLARATION="xmldecl";var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.XmlText=void 0;const p=d;class g extends p.XmlNode{constructor(e=""){super(),this.text=e}get type(){return p.XmlNode.TYPE_TEXT}toJSON(){return Object.assign(p.XmlNode.prototype.toJSON.call(this),{text:this.text})}}f.XmlText=g,Object.defineProperty(h,"__esModule",{value:!0}),h.XmlCdata=void 0;const S=d,E=f;class y extends E.XmlText{get type(){return S.XmlNode.TYPE_CDATA}}h.XmlCdata=y;var P={};Object.defineProperty(P,"__esModule",{value:!0}),P.XmlComment=void 0;const b=d;class v extends b.XmlNode{constructor(e=""){super(),this.content=e}get type(){return b.XmlNode.TYPE_COMMENT}toJSON(){return Object.assign(b.XmlNode.prototype.toJSON.call(this),{content:this.content})}}P.XmlComment=v;var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.XmlDeclaration=void 0;const O=d;class N extends O.XmlNode{constructor(e,t,n){super(),this.version=e,this.encoding=t??null,this.standalone=n??null}get type(){return O.XmlNode.TYPE_XML_DECLARATION}toJSON(){let e=O.XmlNode.prototype.toJSON.call(this);e.version=this.version;for(let t of["encoding","standalone"])null!==this[t]&&(e[t]=this[t]);return e}}x.XmlDeclaration=N;var T={},X={};Object.defineProperty(X,"__esModule",{value:!0}),X.XmlElement=void 0;const C=d;class w extends C.XmlNode{constructor(e,t=Object.create(null),n=[]){super(),this.name=e,this.attributes=t,this.children=n}get isEmpty(){return 0===this.children.length}get preserveWhitespace(){let e=this;for(;e instanceof w;){if("xml:space"in e.attributes)return"preserve"===e.attributes["xml:space"];e=e.parent}return!1}get text(){return this.children.map((e=>"text"in e?e.text:"")).join("")}get type(){return C.XmlNode.TYPE_ELEMENT}toJSON(){return Object.assign(C.XmlNode.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map((e=>e.toJSON()))})}}X.XmlElement=w,Object.defineProperty(T,"__esModule",{value:!0}),T.XmlDocument=void 0;const I=X,G=d;class M extends G.XmlNode{constructor(e=[]){super(),this.children=e}get document(){return this}get root(){for(let e of this.children)if(e instanceof I.XmlElement)return e;return null}get text(){return this.children.map((e=>"text"in e?e.text:"")).join("")}get type(){return G.XmlNode.TYPE_DOCUMENT}toJSON(){return Object.assign(G.XmlNode.prototype.toJSON.call(this),{children:this.children.map((e=>e.toJSON()))})}}T.XmlDocument=M;var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.XmlDocumentType=void 0;const j=d;class F extends j.XmlNode{constructor(e,t,n,r){super(),this.name=e,this.publicId=t??null,this.systemId=n??null,this.internalSubset=r??null}get type(){return j.XmlNode.TYPE_DOCUMENT_TYPE}toJSON(){let e=j.XmlNode.prototype.toJSON.call(this);e.name=this.name;for(let t of["publicId","systemId","internalSubset"])null!==this[t]&&(e[t]=this[t]);return e}}_.XmlDocumentType=F;var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.XmlError=void 0;class A extends Error{constructor(e,t,n){let r=1,s="",i=1;for(let e=0;e<t;++e){let t=n[e];"\\n"===t?(r=1,s="",i+=1):(r+=1,s+=t)}let o=n.indexOf("\\n",t);s+=-1===o?n.slice(t):n.slice(t,o);let a=0;s.length>50&&(r<40?s=s.slice(0,50):(a=r-20,s=s.slice(a,r+30))),super(`${e} (line ${i}, column ${r})\\n  ${s}\\n`+" ".repeat(r-a+1)+"^\\n"),this.column=r,this.excerpt=s,this.line=i,this.name="XmlError",this.pos=t}}D.XmlError=A;var L={};Object.defineProperty(L,"__esModule",{value:!0}),L.XmlProcessingInstruction=void 0;const W=d;class R extends W.XmlNode{constructor(e,t=""){super(),this.name=e,this.content=t}get type(){return W.XmlNode.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(W.XmlNode.prototype.toJSON.call(this),{name:this.name,content:this.content})}}L.XmlProcessingInstruction=R;var U=t&&t.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),B=t&&t.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),k=t&&t.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&U(t,e,n);return B(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.Parser=void 0;const $=s,Y=k(a),V=h,J=P,q=x,Q=T,z=_,K=X,H=D,Z=d,ee=L,te=f;function ne(e){let t=0;for(;-1!==(t=e.indexOf("\\r",t));)e="\\n"===e[t+1]?e.slice(0,t)+e.slice(t+1):e.slice(0,t)+"\\n"+e.slice(t+1);return e}r.Parser=class{constructor(e,t={}){let n=this.document=new Q.XmlDocument,r=this.scanner=new $.StringScanner(e);if(this.currentNode=n,this.options=t,this.options.includeOffsets&&(n.start=0,n.end=e.length),r.consumeStringFast("\\ufeff"),this.consumeProlog(),!this.consumeElement())throw this.error("Root element is missing or invalid");for(;this.consumeMisc(););if(!r.isEnd)throw this.error("Extra content at the end of the document")}addNode(e,t){return e.parent=this.currentNode,this.options.includeOffsets&&(e.start=this.scanner.charIndexToByteIndex(t),e.end=this.scanner.charIndexToByteIndex()),this.currentNode.children.push(e),!0}addText(e,t){let{children:n}=this.currentNode,{length:r}=n;if(e=ne(e),r>0){let t=n[r-1];if(t?.type===Z.XmlNode.TYPE_TEXT){let n=t;return n.text+=e,this.options.includeOffsets&&(n.end=this.scanner.charIndexToByteIndex()),!0}}return this.addNode(new te.XmlText(e),t)}consumeAttributes(){let e=Object.create(null);for(;this.consumeWhitespace();){let t=this.consumeName();if(!t)break;let n=this.consumeEqual()&&this.consumeAttributeValue();if(!1===n)throw this.error("Attribute value expected");if(t in e)throw this.error(`Duplicate attribute: ${t}`);if("xml:space"===t&&"default"!==n&&"preserve"!==n)throw this.error(\'Value of the `xml:space` attribute must be "default" or "preserve"\');e[t]=n}if(this.options.sortAttributes){let t=Object.keys(e).sort(),n=Object.create(null);for(let r=0;r<t.length;++r){let s=t[r];n[s]=e[s]}e=n}return e}consumeAttributeValue(){let e,{scanner:t}=this,n=t.peek();if(\'"\'!==n&&"\'"!==n)return!1;t.advance();let r=!1,s="",i=\'"\'===n?Y.attValueCharDoubleQuote:Y.attValueCharSingleQuote;e:for(;!t.isEnd;)switch(e=t.consumeMatch(i),e&&(this.validateChars(e),s+=e.replace(Y.attValueNormalizedWhitespace," ")),t.peek()){case n:r=!0;break e;case"&":s+=this.consumeReference();continue;case"<":throw this.error("Unescaped `<` is not allowed in an attribute value");case"":break e}if(!r)throw this.error("Unclosed attribute");return t.advance(),s}consumeCdataSection(){let{scanner:e}=this,t=e.charIndex;if(!e.consumeStringFast("<![CDATA["))return!1;let n=e.consumeUntilString("]]>");if(this.validateChars(n),!e.consumeStringFast("]]>"))throw this.error("Unclosed CDATA section");return this.options.preserveCdata?this.addNode(new V.XmlCdata(ne(n)),t):this.addText(n,t)}consumeCharData(){let{scanner:e}=this,t=e.charIndex,n=e.consumeUntilMatch(Y.endCharData);if(!n)return!1;if(this.validateChars(n),"]]>"===e.peek(3))throw this.error("Element content may not contain the CDATA section close delimiter `]]>`");return this.addText(n,t)}consumeComment(){let{scanner:e}=this,t=e.charIndex;if(!e.consumeStringFast("\\x3c!--"))return!1;let n=e.consumeUntilString("--");if(this.validateChars(n),!e.consumeStringFast("--\\x3e")){if("--"===e.peek(2))throw this.error("The string `--` isn\'t allowed inside a comment");throw this.error("Unclosed comment")}return!this.options.preserveComments||this.addNode(new J.XmlComment(ne(n)),t)}consumeContentReference(){let e=this.scanner.charIndex,t=this.consumeReference();return!!t&&this.addText(t,e)}consumeDoctypeDeclaration(){let{scanner:e}=this,t=e.charIndex;if(!e.consumeStringFast("<!DOCTYPE"))return!1;let n,r,s,i=this.consumeWhitespace()&&this.consumeName();if(!i)throw this.error("Expected a name");if(this.consumeWhitespace()){if(e.consumeStringFast("PUBLIC")){if(n=this.consumeWhitespace()&&this.consumePubidLiteral(),!1===n)throw this.error("Expected a public identifier");this.consumeWhitespace()}if(void 0!==n||e.consumeStringFast("SYSTEM")){if(this.consumeWhitespace(),r=this.consumeSystemLiteral(),!1===r)throw this.error("Expected a system identifier");this.consumeWhitespace()}}if(e.consumeStringFast("[")){if(s=e.consumeUntilMatch(/\\][\\x20\\t\\r\\n]*>/),!e.consumeStringFast("]"))throw this.error("Unclosed internal subset");this.consumeWhitespace()}if(!e.consumeStringFast(">"))throw this.error("Unclosed doctype declaration");return!this.options.preserveDocumentType||this.addNode(new z.XmlDocumentType(i,n,r,s),t)}consumeElement(){let{scanner:e}=this,t=e.charIndex;if(!e.consumeStringFast("<"))return!1;let n=this.consumeName();if(!n)return e.reset(t),!1;let r=this.consumeAttributes(),s=!!e.consumeStringFast("/>"),i=new K.XmlElement(n,r);if(i.parent=this.currentNode,!s){if(!e.consumeStringFast(">"))throw this.error(`Unclosed start tag for element \\`${n}\\``);this.currentNode=i;do{this.consumeCharData()}while(this.consumeElement()||this.consumeContentReference()||this.consumeCdataSection()||this.consumeProcessingInstruction()||this.consumeComment());let t,r=e.charIndex;if(!e.consumeStringFast("</")||!(t=this.consumeName())||t!==n)throw e.reset(r),this.error(`Missing end tag for element ${n}`);if(this.consumeWhitespace(),!e.consumeStringFast(">"))throw this.error(`Unclosed end tag for element ${n}`);this.currentNode=i.parent}return this.addNode(i,t)}consumeEqual(){return this.consumeWhitespace(),!!this.scanner.consumeStringFast("=")&&(this.consumeWhitespace(),!0)}consumeMisc(){return this.consumeComment()||this.consumeProcessingInstruction()||this.consumeWhitespace()}consumeName(){return Y.isNameStartChar(this.scanner.peek())?this.scanner.consumeMatchFn(Y.isNameChar):""}consumeProcessingInstruction(){let{scanner:e}=this,t=e.charIndex;if(!e.consumeStringFast("<?"))return!1;let n=this.consumeName();if(!n)throw this.error("Invalid processing instruction");if("xml"===n.toLowerCase())throw e.reset(t),this.error("XML declaration isn\'t allowed here");if(!this.consumeWhitespace()){if(e.consumeStringFast("?>"))return this.addNode(new ee.XmlProcessingInstruction(n),t);throw this.error("Whitespace is required after a processing instruction name")}let r=e.consumeUntilString("?>");if(this.validateChars(r),!e.consumeStringFast("?>"))throw this.error("Unterminated processing instruction");return this.addNode(new ee.XmlProcessingInstruction(n,ne(r)),t)}consumeProlog(){let{scanner:e}=this,t=e.charIndex;for(this.consumeXmlDeclaration();this.consumeMisc(););if(this.consumeDoctypeDeclaration())for(;this.consumeMisc(););return t<e.charIndex}consumePubidLiteral(){let e=this.scanner.charIndex,t=this.consumeSystemLiteral();if(!1!==t&&!/^[-\\x20\\r\\na-zA-Z0-9\'()+,./:=?;!*#@$_%]*$/.test(t))throw this.scanner.reset(e),this.error("Invalid character in public identifier");return t}consumeReference(){let{scanner:e}=this;if(!e.consumeStringFast("&"))return!1;let t,n=e.consumeMatchFn(Y.isReferenceChar);if(";"!==e.consume())throw this.error("Unterminated reference (a reference must end with `;`)");if("#"===n[0]){let e="x"===n[1]?parseInt(n.slice(2),16):parseInt(n.slice(1),10);if(isNaN(e))throw this.error("Invalid character reference");if(!Y.isXmlCodePoint(e))throw this.error("Character reference resolves to an invalid character");t=String.fromCodePoint(e)}else if(t=Y.predefinedEntities[n],void 0===t){let{ignoreUndefinedEntities:t,resolveUndefinedEntity:r}=this.options,s=`&${n};`;if(r){let e=r(s);if(null!=e){let t=typeof e;if("string"!==t)throw new TypeError(`\\`resolveUndefinedEntity()\\` must return a string, \\`null\\`, or \\`undefined\\`, but returned a value of type ${t}`);return e}}if(t)return s;throw e.reset(-s.length),this.error(`Named entity isn\'t defined: ${s}`)}return t}consumeSystemLiteral(){let{scanner:e}=this,t=e.consumeStringFast(\'"\')||e.consumeStringFast("\'");if(!t)return!1;let n=e.consumeUntilString(t);if(this.validateChars(n),!e.consumeStringFast(t))throw this.error("Missing end quote");return n}consumeWhitespace(){return!!this.scanner.consumeMatchFn(Y.isWhitespace)}consumeXmlDeclaration(){let{scanner:e}=this,t=e.charIndex;if(!e.consumeStringFast("<?xml"))return!1;if(!this.consumeWhitespace())throw this.error("Invalid XML declaration");let n,r,s=!!e.consumeStringFast("version")&&this.consumeEqual()&&this.consumeSystemLiteral();if(!1===s)throw this.error("XML version is missing or invalid");if(!/^1\\.[0-9]+$/.test(s))throw this.error("Invalid character in version number");if(this.consumeWhitespace()&&(n=!!e.consumeStringFast("encoding")&&this.consumeEqual()&&this.consumeSystemLiteral(),n&&this.consumeWhitespace(),r=!!e.consumeStringFast("standalone")&&this.consumeEqual()&&this.consumeSystemLiteral(),r)){if("yes"!==r&&"no"!==r)throw this.error(\'Only "yes" and "no" are permitted as values of `standalone`\');this.consumeWhitespace()}if(!e.consumeStringFast("?>"))throw this.error("Invalid or unclosed XML declaration");return!this.options.preserveXmlDeclaration||this.addNode(new q.XmlDeclaration(s,n||void 0,r||void 0),t)}error(e){let{scanner:t}=this;return new H.XmlError(e,t.charIndex,t.string)}validateChars(e){let{length:t}=e;for(let n=0;n<t;++n){let t=e.codePointAt(n);if(!Y.isXmlCodePoint(t))throw this.scanner.reset(-([...e].length-n)),this.error("Invalid character");t>65535&&(n+=1)}}};var re={};Object.defineProperty(re,"__esModule",{value:!0}),function(e){var n=t&&t.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=t&&t.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseXml=e.XmlText=e.XmlProcessingInstruction=e.XmlNode=e.XmlError=e.XmlElement=e.XmlDocumentType=e.XmlDocument=e.XmlDeclaration=e.XmlComment=e.XmlCdata=void 0;const i=r;s(re,e);var o=h;Object.defineProperty(e,"XmlCdata",{enumerable:!0,get:function(){return o.XmlCdata}});var a=P;Object.defineProperty(e,"XmlComment",{enumerable:!0,get:function(){return a.XmlComment}});var c=x;Object.defineProperty(e,"XmlDeclaration",{enumerable:!0,get:function(){return c.XmlDeclaration}});var u=T;Object.defineProperty(e,"XmlDocument",{enumerable:!0,get:function(){return u.XmlDocument}});var l=_;Object.defineProperty(e,"XmlDocumentType",{enumerable:!0,get:function(){return l.XmlDocumentType}});var m=X;Object.defineProperty(e,"XmlElement",{enumerable:!0,get:function(){return m.XmlElement}});var p=D;Object.defineProperty(e,"XmlError",{enumerable:!0,get:function(){return p.XmlError}});var g=d;Object.defineProperty(e,"XmlNode",{enumerable:!0,get:function(){return g.XmlNode}});var S=L;Object.defineProperty(e,"XmlProcessingInstruction",{enumerable:!0,get:function(){return S.XmlProcessingInstruction}});var E=f;Object.defineProperty(e,"XmlText",{enumerable:!0,get:function(){return E.XmlText}}),e.parseXml=function(e,t){return new i.Parser(e,t).document}}(n);class se extends Error{constructor(e){super(e)}}function ie(e){const t=e.indexOf(":");return t>-1?e.substr(t+1):e}function oe(e){return e.children[0]}function ae(e){return e.name||""}function ce(e,t,n=!1){const r=ie(t);return e&&Array.isArray(e.children)?e.children.reduce((function e(t,s){return ie(ae(s))===r&&t.push(s),n&&Array.isArray(s.children)?[...t,...s.children.reduce(e,[])]:t}),[]):[]}function ue(e,t,n=!1){return ce(e,t,n)[0]||null}function le(e){return e&&Array.isArray(e.children)?[...e.children.filter((e=>e instanceof n.XmlElement))]:[]}function he(e){const t=e&&Array.isArray(e.children)?e.children.find((e=>"text"===e.type)):null;return t?t.text:""}function de(e,t){return e&&e.attributes[t]||""}class me extends Error{constructor(e,t,n){super(e),this.message=e,this.httpStatus=t,this.isCrossOriginRelated=n}}const fe=["utf-8","utf-16","iso-8859-1"],pe="utf-8";const ge=new Map;function Se(e){return function(e,t="GET"){const n=`${t}#${e}`;if(ge.has(n))return ge.get(n);const r=fetch(e,{method:t}).catch((e=>e)).then((e=>(ge.delete(n),e)));return ge.set(n,r),r.then((e=>{if(e instanceof Error)throw e;return e}))}(e).catch((()=>fetch(e,{method:"HEAD",mode:"no-cors"}).catch((e=>{throw new me(`Fetching the document failed either due to network errors or unreachable host, error is: ${e.message}`,0,!1)})).then((()=>{throw new me("The document could not be fetched due to CORS limitations",0,!0)})))).then((async e=>{if(!e.ok){const t=await e.text();throw new me(`Received an error with code ${e.status}: ${t}`,e.status,!1)}return function(e,t){const n=t?function(e){const t=/charset=([^;]+)/.exec(e);return t?t[1]:null}(t):null,r=n?[n,...fe]:fe;for(const t of r)try{return new TextDecoder(t,{fatal:!0}).decode(e)}catch(e){}return console.warn(`XML document encoding could not be determined, falling back to ${pe}.`),new TextDecoder(pe).decode(e)}(await e.arrayBuffer(),e.headers.get("Content-Type"))})).then((e=>function(e){let t=null;try{t=n.parseXml(e)}catch(e){throw new se(e.message)}return t}(e)))}function Ee(e,t){const n=e.match(/(https?%3A%2F%2F[^/]+)$/);if(n){const r=n[1],s=Ee(decodeURIComponent(r),t);return e.replace(r,encodeURIComponent(s))}const r=new URL(e),s=Object.keys(t),i=s.map((e=>e.toLowerCase())),o=[];for(const e of r.searchParams.keys())i.indexOf(e.toLowerCase())>-1&&o.push(e);return o.map((e=>r.searchParams.delete(e))),s.forEach((e=>r.searchParams.set(e,!0===t[e]?"":t[e]))),r.toString()}const ye=["EPSG:4046","EPSG:4075","EPSG:4120","EPSG:4122","EPSG:4124","EPSG:4126","EPSG:4149","EPSG:4151","EPSG:4153","EPSG:4155","EPSG:4157","EPSG:4159","EPSG:4161","EPSG:4163","EPSG:4165","EPSG:4167","EPSG:4169","EPSG:4171","EPSG:4173","EPSG:4175","EPSG:4178","EPSG:4180","EPSG:4182","EPSG:4184","EPSG:4188","EPSG:4190","EPSG:4191","EPSG:4196","EPSG:4198","EPSG:4202","EPSG:4210","EPSG:4211","EPSG:4214","EPSG:4226","EPSG:4229","EPSG:4231","EPSG:4233","EPSG:4236","EPSG:4238","EPSG:4240","EPSG:4242","EPSG:4244","EPSG:4246","EPSG:4248","EPSG:4250","EPSG:4252","EPSG:4255","EPSG:4258","EPSG:4261","EPSG:4264","EPSG:4267","EPSG:4270","EPSG:4273","EPSG:4276","EPSG:4279","EPSG:4281","EPSG:4284","EPSG:4286","EPSG:4288","EPSG:4292","EPSG:4295","EPSG:4297","EPSG:4299","EPSG:4302","EPSG:4324","EPSG:4326"];function Pe(e){if(/^urn:(?:x-)?ogc:def:crs:epsg:/.test(e.toLowerCase())){return`EPSG:${/([0-9]+)$/.exec(e)[1]}`}return e}function be(e){return oe(e).attributes.version}function ve(e){const t=be(e);return ce(ue(oe(e),"Capability"),"Layer").map((e=>Oe(e,t)))}function xe(e){const t=ue(oe(e),"Service"),n=ce(ue(t,"KeywordList"),"Keyword").map(he).filter(((e,t,n)=>n.indexOf(e)===t));return{title:he(ue(t,"Title")),name:he(ue(t,"Name")),abstract:he(ue(t,"Abstract")),fees:he(ue(t,"Fees")),constraints:he(ue(t,"AccessConstraints")),keywords:n}}function Oe(e,t,n=[],r=[],s=null){const i="1.3.0"===t?"CRS":"SRS",o=ce(e,i).map(he),a=o.length>0?o:n,c=ce(e,"Style").map(Ne),u=c.length>0?c:r;function l(e){const n=de(e,i);var r;return(r=n,ye.indexOf(Pe(r))>-1&&"1.3.0"===t?["miny","minx","maxy","maxx"]:["minx","miny","maxx","maxy"]).map((t=>de(e,t)))}const h=ue(e,"Attribution"),d=null!==h?function(e){const t=de(ue(ue(e,"LogoURL"),"OnlineResource"),"xlink:href"),n=de(ue(e,"OnlineResource"),"xlink:href"),r=he(ue(e,"Title"));return Object.assign(Object.assign(Object.assign({},r&&{title:r}),n&&{url:n}),t&&{logoUrl:t})}(h):s,m=ce(e,"Layer").map((e=>Oe(e,t,a,u,d)));return Object.assign({name:he(ue(e,"Name")),title:he(ue(e,"Title")),abstract:he(ue(e,"Abstract")),availableCrs:a,styles:u,attribution:d,boundingBoxes:ce(e,"BoundingBox").reduce(((e,t)=>Object.assign(Object.assign({},e),{[de(t,i)]:l(t)})),{})},m.length&&{children:m})}function Ne(e){const t=de(ue(ue(e,"LegendURL"),"OnlineResource"),"xlink:href");return Object.assign({name:he(ue(e,"Name")),title:he(ue(e,"Title"))},t&&{legendUrl:t})}function Te(e){return oe(e).attributes.version}function Xe(e){let t;if(Te(e).startsWith("1.0")){const n=ue(ue(ue(oe(e),"Capability"),"Request"),"GetFeature");t=le(ue(n,"ResultFormat")).map(ae)}else{const n=ce(ue(oe(e),"OperationsMetadata"),"Operation").find((e=>"GetFeature"===de(e,"name"))),r=ce(n,"Parameter").find((e=>"outputFormat"===de(e,"name")));t=ce(r,"Value",!0).map(he)}return t}function Ce(e){const t=Te(e),n=t.startsWith("1.0")?"Service":"ServiceIdentification",r=t.startsWith("1.0")?"Name":"ServiceType",s=ue(oe(e),n);let i;return i=t.startsWith("1.0")?he(ue(s,"Keywords")).split(",").map((e=>e.trim())):ce(ue(s,"Keywords"),"Keyword").map(he),{title:he(ue(s,"Title")),name:he(ue(s,r)),abstract:he(ue(s,"Abstract")),fees:he(ue(s,"Fees")),constraints:he(ue(s,"AccessConstraints")),keywords:i,outputFormats:Xe(e)}}function we(e){const t=Te(e),n=Xe(e);return ce(ue(oe(e),"FeatureTypeList"),"FeatureType").map((e=>function(e,t,n){const r=t.startsWith("2.")?"CRS":"SRS",s=t.startsWith("1.0")?"SRS":`Default${r}`;function i(){const t=ue(e,"LatLongBoundingBox");return["minx","miny","maxx","maxy"].map((e=>de(t,e))).map(parseFloat)}function o(){const t=ue(e,"WGS84BoundingBox");return["LowerCorner","UpperCorner"].map((e=>ue(t,e))).map((e=>he(e).split(" "))).reduce(((e,t)=>[...e,...t])).map(parseFloat)}const a=t.startsWith("1.0")?[]:ce(e,`Other${r}`).map(he).map(Pe),c=t.startsWith("1.0")?[]:ce(ue(e,"OutputFormats"),"Format").map(he);return{name:he(ue(e,"Name")),title:he(ue(e,"Title")),abstract:he(ue(e,"Abstract")),defaultCrs:Pe(he(ue(e,s))),otherCrs:a,outputFormats:c.length>0?c:n,latLonBoundingBox:t.startsWith("1.0")?i():o()}}(e,t,n)))}function Ie(e,t,n){const r=oe(e);let s;if(n.startsWith("2.0"))s=ce(r,"member").map((e=>le(e)[0]));else{const e=ue(r,"featureMembers");s=e?le(e):ce(r,"featureMember").map((e=>le(e)[0]))}const i="1.0.0"===n?"fid":"gml:id";function o(e,n){switch(t.properties[e]){case"integer":return parseInt(n);case"float":return parseFloat(n);case"boolean":return"true"===n;default:return n}}function a(e){return le(e).filter((e=>ie(ae(e))in t.properties)).reduce(((e,t)=>{const n=ie(ae(t));return Object.assign(Object.assign({},e),{[n]:o(n,he(t))})}),{})}return s.map((e=>({id:de(e,i),properties:a(e)})))}function Ge(e,t,n,r,s,i,o,a,c,u){const l="2.0.0"===t?"COUNT":"MAXFEATURES",h={SERVICE:"WFS",REQUEST:"GetFeature",VERSION:t,["2.0.0"===t?"TYPENAMES":"TYPENAME"]:n};if(void 0!==r&&(h.OUTPUTFORMAT=r),void 0!==i&&(h.PROPERTYNAME=i.join(",")),o?(h.RESULTTYPE="hits",h[l]="1"):void 0!==s&&(h[l]=s.toString(10)),a&&(h.SRSNAME=a),c){const e=c.join(",");h.BBOX=u?`${e},${u}`:e}return Ee(e,h)}e("parseWmsCapabilities",globalThis,(({url:e})=>Se(e).then((e=>({info:xe(e),layers:ve(e),version:be(e)}))))),e("parseWfsCapabilities",globalThis,(({url:e})=>Se(e).then((e=>({info:Ce(e),featureTypes:we(e),version:Te(e)}))))),e("queryWfsFeatureTypeDetails",globalThis,(({url:e,serviceVersion:t,featureTypeFull:n})=>Se(Ge(e,t,n.name,void 0,void 0,Object.keys(n.properties))).then((e=>{return{props:(r=Ie(e,n,t),r.reduce(((e,t)=>{for(const n in t.properties){const r=t.properties[n];n in e||(e[n]={uniqueValues:[]});const s=e[n].uniqueValues.find((e=>e.value===r));s?s.count++:e[n].uniqueValues.push({value:r,count:1})}return e}),{}))};var r}))));\n'],{type:"application/javascript"})),{type:"module"})),s)}function c(e){return(0,r.sendTaskRequest)("parseWmsCapabilities",a(),{url:e})}function l(e){return(0,r.sendTaskRequest)("parseWfsCapabilities",a(),{url:e})}function u(e,t,n){return(0,r.sendTaskRequest)("queryWfsFeatureTypeDetails",a(),{url:e,serviceVersion:t,featureTypeFull:n})}t.enableFallbackWithoutWorker=o,t.parseWmsCapabilities=c,t.parseWfsCapabilities=l,t.queryWfsFeatureTypeDetails=u},f0ac:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueId=void 0;let r=0;function s(){return r++}t.getUniqueId=s},f40d:function(e,t,n){},f490:function(e,t,n){"use strict";n("d9e2"),n("5494"),n("14d9"),Object.defineProperty(t,"__esModule",{value:!0}),t.setQueryParams=t.queryXmlDocument=t.sharedFetch=void 0;var r=n("8b0f"),s=n("96ff"),i=n("9307");const o=new Map;function a(e,t="GET"){const n=`${t}#${e}`;if(o.has(n))return o.get(n);const r=fetch(e,{method:t}).catch(e=>e).then(e=>(o.delete(n),e));return o.set(n,r),r.then(e=>{if(e instanceof Error)throw e;return e})}function c(e){return a(e).catch(()=>fetch(e,{method:"HEAD",mode:"no-cors"}).catch(e=>{throw new s.EndpointError("Fetching the document failed either due to network errors or unreachable host, error is: "+e.message,0,!1)}).then(()=>{throw new s.EndpointError("The document could not be fetched due to CORS limitations",0,!0)})).then(async e=>{if(!e.ok){const t=await e.text();throw new s.EndpointError(`Received an error with code ${e.status}: ${t}`,e.status,!1)}const t=await e.arrayBuffer(),n=e.headers.get("Content-Type");return(0,i.decodeString)(t,n)}).then(e=>(0,r.parseXmlString)(e))}function l(e,t){const n=e.match(/(https?%3A%2F%2F[^/]+)$/);if(n){const r=n[1],s=l(decodeURIComponent(r),t);return e.replace(r,encodeURIComponent(s))}const r=new URL(e),s=Object.keys(t),i=s.map(e=>e.toLowerCase()),o=[];for(const a of r.searchParams.keys())i.indexOf(a.toLowerCase())>-1&&o.push(a);return o.map(e=>r.searchParams.delete(e)),s.forEach(e=>r.searchParams.set(e,!0===t[e]?"":t[e])),r.toString()}t.sharedFetch=a,t.queryXmlDocument=c,t.setQueryParams=l},fc04:function(e,t,n){}});
//# sourceMappingURL=app.9f2ac7c1.js.map